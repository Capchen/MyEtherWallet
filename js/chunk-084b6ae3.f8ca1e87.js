(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-084b6ae3"],{"8ff0":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("mew-module",{staticClass:"text-center d-flex justify-end flex-grow-1 pt-6 mr-3",attrs:{"has-elevation":!0,"has-indicator":!0,title:"NFT Manager"},scopedSlots:e._u([{key:"moduleBody",fn:function(){return[e.loadingContracts&&!e.hasNoTokens?n("v-skeleton-loader",{attrs:{type:"table-heading,list-item-avatar-three-line, list-item-avatar-three-line, list-item-avatar-three-line"}}):e._e(),!e.loadingContracts&&0===e.contracts.length&&0===e.tabs.length||e.hasNoTokens?n("v-card",{staticClass:"d-flex align-center px-5 py-4",attrs:{flat:"",color:"selectorBg lighten-1","min-height":"94px"}},[n("v-card-text",{staticClass:"text-center"},[e._v(e._s(e.$t("nftManager.none-owned"))+" ")])],1):e._e(),!e.loadingContracts&&!e.onNftSend&&e.tabs.length>0&&!e.hasNoTokens?n("mew-tabs",{attrs:{items:e.tabs,"is-vertical":e.$vuetify.breakpoint.mdAndUp,"has-underline":e.$vuetify.breakpoint.smAndDown,"active-tab":e.activeTab},on:{onTab:e.onTab}},[e._l(e.contracts,(function(t,a){return n("template",{slot:"tabItemContent"+(a+1)},[n("div",{key:a,staticClass:"ml-5"},[n("div",{staticClass:"d-flex justify-space-between mt-3 mb-5"},[n("h5",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e.selectedContract.name)+" ")]),n("div",[e._v("Total: "+e._s(e.selectedContract.total))])]),e.displayedTokens&&0===e.displayedTokens.length?n("div",[e._v(" Loading ... ")]):e._e(),e.displayedTokens&&0!==e.displayedTokens.length?n("div",[e._l(e.displayedTokens,(function(t,a){return n("div",{key:a,staticClass:"mb-3"},[n("nft-manager-details",{attrs:{loading:e.loadingTokens,"on-click":e.openNftSend,token:t}})],1)})),e.hasPages?n("div",{staticClass:"px-4 mt-3 d-flex align-center justify-end"},[n("v-pagination",{staticClass:"nft-pagination",attrs:{color:"expandHeader",length:e.totalPages,"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},on:{input:e.setPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1):e._e()],2):e._e()])])}))],2):e._e(),e.onNftSend?n("nft-manager-send",{attrs:{close:e.closeNftSend,nft:e.selectedNft,"nft-category":e.selectedContract.name,send:e.sendTx,disabled:!e.isValid,"enough-funds":e.enoughFunds,"show-balance-error":e.showBalanceError,"set-address":e.setAddress},on:{hasMinEth:e.hasMinEth}}):e._e()]},proxy:!0}])})],1)},s=[],r=n("53ca"),i=n("c7eb"),o=n("1da1"),c=n("5530"),d=(n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("99af"),n("b0c0"),n("4de4"),n("7db0"),n("14d9"),n("fb6a"),n("caad"),n("2532"),n("25f0"),n("ac1f"),n("5319"),n("c740"),n("a434"),n("2f62")),u=n("5ba3"),l=n.n(u),p=n("9b88"),h=(n("a15b"),n("0b16")),f=n.n(h),y=function(e){return e?(e=e.toString(),e.charAt(0).toUpperCase()+e.substr(1,e.length)):""},m=function(e){var t=f.a.parse(e).hostname,n=t.split(".");return n.length>2?y("".concat(n[1],".").concat(n[2])):y(n.join("."))},b=m,g=n("db3a"),T=n("913e"),w=n("ac8e"),v=n("d4ec"),k=n("bee2"),N=(n("d9e2"),{url:"https://nft.mewapi.io",countPerPage:9,cryptoKittiesContract:"0x06012c8cf97bead5deae237070f9587f8e7a266d",mainnet:"ETH",api:"https://mainnet.mewwallet.dev"}),x="https://partners.mewapi.io/nfts",_={1:"".concat(x,"/owners?chains=ethereum&queried_wallet_balances=1&wallet_addresses="),137:"".concat(x,"/owners?chains=polygon&queried_wallet_balances=1&wallet_addresses="),56:"".concat(x,"/owners?chains=bsc&queried_wallet_balances=1&wallet_addresses=")},P=N,A=[{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_tokenId",type:"uint256"}],name:"transfer",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],C=A,j=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256[]",name:"ids",type:"uint256[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"}],name:"TransferBatch",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"TransferSingle",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"value",type:"string"},{indexed:!0,internalType:"uint256",name:"id",type:"uint256"}],name:"URI",type:"event"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"id",type:"uint256"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"accounts",type:"address[]"},{internalType:"uint256[]",name:"ids",type:"uint256[]"}],name:"balanceOfBatch",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256[]",name:"ids",type:"uint256[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeBatchTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"}],F=j,O=n("901e"),M=n.n(O),E=function(){function e(t){var n=t.network,a=t.address,s=t.web3;Object(v["a"])(this,e),this.network=n,this.address=a,this.web3=s,this.countPerPage=P.countPerPage,this.currentPage=1}return Object(k["a"])(e,[{key:"getNfts",value:function(){var e=Object(o["a"])(Object(i["a"])().mark((function e(){var t,n,a,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(_[this.network.type.chainID]).concat(this.address)).then((function(e){return e.json()}));case 3:t=e.sent,n=t.result,a=n.nfts;case 6:if(!n.next){e.next=14;break}return e.next=9,fetch(n.next).then((function(e){return e.json()}));case 9:s=e.sent,n=s.result,a=a.concat(n.nfts),e.next=6;break;case 14:return e.abrupt("return",a);case 17:throw e.prev=17,e.t0=e["catch"](0),new Error(e.t0);case 20:case"end":return e.stop()}}),e,this,[[0,17]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"isValidAddress",value:function(e){return""!==e&&l.a.isAddress(e)}},{key:"send",value:function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.contract=new this.web3.eth.Contract(t.erc721?C:F),n=t.contract.includes(P.cryptoKittiesContract)?this.cryptoKittiesTransfer(e,t):t.erc721?this.safeTransferFrom(e,t):this.safeTransferFromRarible(e,t,1),n.from=this.address,void 0!==a&&(n.gasPrice=a),this.web3.eth.sendTransaction(n)}},{key:"getGasFees",value:function(){var e=Object(o["a"])(Object(i["a"])().mark((function e(t,n){var a,s;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.contract=new this.web3.eth.Contract(n.erc721?C:F),a=n.contract.toLowerCase().includes(P.cryptoKittiesContract)?this.cryptoKittiesTransfer(t,n):n.erc721?this.safeTransferFrom(t,n):this.safeTransferFromRarible(t,n,1),a.from=this.address,s=this.web3.eth.estimateGas(a),e.abrupt("return",s);case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"safeTransferFrom",value:function(e,t){return{to:t.contract,data:this.contract.methods.safeTransferFrom(this.address,e,t.token_id).encodeABI()}}},{key:"safeTransferFromRarible",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0x";return{to:t.contract,data:this.contract.methods.safeTransferFrom(this.address,e,t.token_id,n,a).encodeABI()}}},{key:"cryptoKittiesTransfer",value:function(e,t){return this.contract.options.address=t.contract,{to:t.contract,data:this.contract.methods.transfer(e,t.token_id).encodeABI()}}},{key:"totalPages",value:function(e){return Math.ceil(new M.a(e).div(this.countPerPage).toNumber())}},{key:"hasPages",value:function(e){return this.countPerPage<e}},{key:"startIndex",value:function(){return this.currentPage*this.countPerPage-this.countPerPage}},{key:"endIndex",value:function(e){var t=this.currentPage*this.countPerPage;return e>t?t:e}},{key:"setCurrentPage",value:function(e){this.currentPage=e}},{key:"goToFirstPage",value:function(){this.currentPage=1}}]),e}(),I=21e3,B={components:{NftManagerDetails:function(){return n.e("chunk-6956298c").then(n.bind(null,"6ccc2"))},NftManagerSend:function(){return n.e("chunk-482f27de").then(n.bind(null,"b10c"))}},data:function(){return{nft:{},activeTab:0,onNftSend:!1,hasNoTokens:!1,selectedNft:{},toAddress:"",selectedContract:{},gasFees:"0",enoughFunds:!1,showBalanceError:!1,localGasPrice:"0",loadingContracts:!0,loadingTokens:!0,nftApiResponse:[]}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(d["e"])("wallet",["balance","web3","address"])),Object(d["e"])("global",["network","gasPriceType"])),Object(d["c"])("wallet",["balanceInETH","balanceInWei"])),Object(d["c"])("global",["isEthNetwork","network","gasPrice","gasPriceByType"])),{},{tabs:function(){return this.contracts.map((function(e){var t="".concat(e.name," (").concat(e.count,")");return t.length>25&&(t=e.name.substring(0,20),t+="... (".concat(e.count,")")),{name:t}}))},tokens:function(){var e=this;if(this.nftApiResponse.length>0){var t=this.nftApiResponse.filter((function(t){return t.contract_address.toLowerCase()===e.selectedContract.contract.toLowerCase()}));if(t)return t.map((function(e){var t=e.image_url?e.image_url:"";return{image:"https://img.mewapi.io/?image=".concat(t),name:e.name||e.token_id,token_id:e.token_id,contract:e.contract_address,erc721:"ERC721"===e.contract.type}}))}return[]},contracts:function(){return this.nftApiResponse.length>0?this.nftApiResponse.reduce((function(e,t){var n=t.queried_wallet_balances[0].quantity,a=e.find((function(e){return e.contract===t.contract_address}));return a?(a.count++,a.total+=n):e.push({contract:t.contract_address,count:1,total:n,name:t.contract.name||t.collection.name}),e}),[]):[]},totalPages:function(){return this.nft.totalPages(this.selectedContract.count)},hasPages:function(){return this.nft.hasPages(this.selectedContract.count)},startIndex:function(){return this.nft.startIndex()},endIndex:function(){return this.nft.endIndex(this.selectedContract.count)},currentPage:{get:function(){return this.nft.currentPage},set:function(e){return e}},displayedTokens:function(){return this.tokens.slice(this.startIndex,this.endIndex)},isValid:function(){return this.nft.isValidAddress(this.toAddress)&&this.enoughFunds},supportedNetwork:function(){return this.supportedNetworks.includes(this.network.type.name)},supportedNetworks:function(){return[T["ETH"].name,T["MATIC"].name,T["BSC"].name]}}),watch:{balanceInWei:function(){this.hasMinEth()},web3:function(){var e=this;this.loadingContracts=!0,this.loadingTokens=!0,this.onNftSend=!1,this.address&&this.$router.push({name:g["b"].NFT_MANAGER.NAME}),this.supportedNetwork?this.setUpNFT():setTimeout((function(){Object(p["e"])("NFT Manager not supported in network: ".concat(e.network.type.name),{},p["f"]),e.nftApiResponse=[]}),1e3)},address:function(){this.loadingContracts=!0,this.loadingTokens=!0,this.onNftSend=!1,this.address&&this.$router.push({name:g["b"].NFT_MANAGER.NAME}),this.setUpNFT()},contracts:function(e){e.length>0&&this.onTab(0)},toAddress:function(e){var t=this;return Object(o["a"])(Object(i["a"])().mark((function n(){var a,s,r;return Object(i["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!Object(u["isAddress"])(e)){n.next=9;break}return a=t.gasPriceByType(t.gasPriceType),t.localGasPrice=a,n.next=5,t.nft.getGasFees(e,t.selectedNft);case 5:s=n.sent,r=Object(w["h"])(s).mul(Object(w["h"])(a)),t.gasFees=r.toString(),r.gte(Object(u["toBN"])(t.balanceInWei))?(t.enoughFunds=!1,t.showBalanceError=!0):(t.enoughFunds=!0,t.showBalanceError=!1);case 9:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.setUpNFT()},methods:{setUpNFT:function(){this.supportedNetwork&&(this.nft=new E({network:this.network,address:this.address,web3:this.web3}),this.getNfts(),this.localGasPrice=this.gasPriceByType(this.gasPriceType),this.hasMinEth())},getNfts:function(){var e=this;this.nft.getNfts().then((function(t){e.nftApiResponse=t,e.loadingContracts=!1,setTimeout((function(){e.loadingTokens=!1}),500)}))},hasMinEth:function(){var e=this.localGasPrice;Object(u["toBN"])(this.balanceInWei).gt(Object(u["toBN"])(e).muln(I))?(this.enoughFunds=!0,this.showBalanceError=!1):(this.enoughFunds=!1,this.showBalanceError=!0)},onTab:function(e){this.activeTab=e,this.selectedContract=this.contracts[e],this.selectedContractHash=this.contracts[e].contract,this.nft.goToFirstPage()},openNftSend:function(e){e&&(this.selectedNft=e),this.onNftSend=!0,this.$router.push({name:g["b"].NFT_MANAGER_SEND.NAME})},closeNftSend:function(){this.onNftSend=!1,this.toAddress="",this.$router.push({name:g["b"].NFT_MANAGER.NAME})},sendTx:function(){var e=this;return Object(o["a"])(Object(i["a"])().mark((function t(){var n;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isValid)try{n=void 0,"MATIC"===e.network.type.name&&(n="0x".concat(Object(u["toBN"])(e.localGasPrice).toString("hex"))),e.nft.send(e.toAddress,e.selectedNft,n).then((function(t){e.updateValues(),e.enoughFunds=!0,e.toAddress="",e.closeNftSend(),Object(p["e"])("Cheers! Your transaction was mined. Check it in ",{title:"".concat(b(e.network.type.blockExplorerTX)),url:e.network.type.blockExplorerTX.replace("[[txHash]]",t.blockHash)},p["d"],5e3)})).catch((function(e){Object(p["e"])(e.message,{},p["a"])}))}catch(a){Object(p["e"])(a.message,{},p["f"])}case 1:case"end":return t.stop()}}),t)})))()},updateValues:function(){var e=this,t=this.tokens.findIndex((function(t){return t.token_id===e.selectedNft.token_id}));this.tokens.splice(t,1),0===this.tokens.length&&1===this.contracts.length&&(this.hasNoTokens=!0),this.getNfts()},setAddress:function(e){"object"===Object(r["a"])(e)&&e?this.toAddress=e.address:this.toAddress=e},setPage:function(e){this.nft.setCurrentPage(e)}}},S=B,R=(n("fbd5"),n("2877")),G=Object(R["a"])(S,a,s,!1,null,null,null);t["default"]=G.exports},e33d:function(e,t,n){},fbd5:function(e,t,n){"use strict";n("e33d")}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-084b6ae3.f8ca1e87.js.map