(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26533e56"],{"0f3a":function(e,t,n){},"14cc":function(e,t,n){"use strict";n("7e38")},"1d83":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pa-8 moonpay-sell-component"},[n("div",{staticClass:"mt-2"},[n("div",{staticClass:"mb-2 d-flex align-center justify-space-between"},[n("div",{staticClass:"font-weight-medium textDark--text"},[e._v(" How much do you want to sell? ")]),e.loading||e.fetchingBalance?e._e():n("button-balance",{staticStyle:{position:"relative",top:"0",right:"0"},attrs:{balance:e.selectedBalance,loading:e.loading}})],1),n("div",{staticClass:"d-flex align-start"},[(e.inWallet,n("mew-input",{staticClass:"no-right-border",staticStyle:{"max-width":"251px","max-height":"86px"},attrs:{"hide-clear-btn":"",type:"number",placeholder:"Enter amount to sell","max-btn-obj":e.maxButton,disabled:e.loading,"error-messages":e.errorMessages,"persistent-hint":e.hasPersistentHint,hint:e.persistentHintMessage},nativeOn:{keydown:function(t){return e.preventCharE(t)}},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})),n("div",{staticClass:"d-flex align-center token-select-button",on:{click:function(t){e.openTokenSelect=!0}}},[n("mew-token-container",{attrs:{img:e.selectedCurrency.img,size:"28px"}}),n("div",{staticClass:"basic--text",staticStyle:{"margin-left":"8px"}},[e._v(" "+e._s(e.selectedCurrency.name)+" ")]),n("v-icon",{staticClass:"ml-auto",attrs:{size:"20px",color:"titlePrimary"}},[e._v(" mdi-chevron-down ")])],1)],1)]),n("div",{staticClass:"mt-2"},[n("div",{staticClass:"font-weight-medium textDark--text mb-2"},[e._v("You will get")]),n("div",{staticClass:"d-flex align-start"},[n("mew-input",{staticClass:"no-right-border",attrs:{"is-read-only":"",value:e.cryptoAmount,"hide-clear-btn":"",type:"number"}}),n("mew-select",{staticClass:"selectedFiat no-left-border",staticStyle:{"max-width":"135px"},attrs:{items:e.fiatCurrencyItems,"is-custom":""},model:{value:e.selectedFiat,callback:function(t){e.selectedFiat=t},expression:"selectedFiat"}})],1)]),e.inWallet?e._e():n("div",{staticClass:"mt-2"},[n("div",{staticClass:"font-weight-medium textDark--text mb-2"},[e._v(" What wallet are you sending your crypto from? ")]),n("module-address-book",{ref:"addressInput",attrs:{label:"Enter Crypto Address","enable-save-address":!1,"is-home-page":!0},on:{setAddress:e.setAddress}})],1),n("div",{staticClass:"pt-2 pb-10"},[n("div",{staticClass:"mew-body textMedium--text"},[e._v(" After submitting your sell order, you will have to send your crypto to Moonpay. Make sure to have enough currency in your wallet to cover network transaction fees. ")]),e.inWallet?n("div",{staticClass:"d-flex align-center justify-space-between mt-4"},[n("div",{staticClass:"mew-body textMedium--text"},[e._v("Estimated Network Fee")]),e.estimatingFees?n("v-skeleton-loader",{attrs:{type:"text",width:"150px"}}):n("div",{staticClass:"mew-body textMedium--text"},[e._v(" ~"+e._s(e.txFeeInEth)+" ")])],1):e._e()]),n("mew-button",{attrs:{title:"SELL WITH MOONPAY","btn-size":"xlarge","has-full-width":"",disabled:e.disableSell,"is-valid-address-func":e.isValidToAddress},nativeOn:{click:function(t){return e.sell.apply(null,arguments)}}}),n("buy-sell-token-select",{attrs:{open:e.openTokenSelect,"currency-items":e.currencyItems,"selected-currency":e.selectedCurrency,"set-currency":e.setCurrency,"in-wallet":e.inWallet,"is-sell":""},on:{close:function(t){e.openTokenSelect=!1}}})],1)},a=[],s=n("b85c"),r=n("5530"),c=(n("d3b7"),n("3ca3"),n("ddb0"),n("4de4"),n("7db0"),n("14d9"),n("d81d"),n("b0c0"),n("caad"),n("2532"),n("25f0"),n("99af"),n("b680"),n("1b74")),o=n.n(c),l=n("2f62"),d=n("2ef0"),u=n("901e"),h=n.n(u),m=n("5ba3"),f=n("99e5"),b=n.n(f),v=n("217a"),y=n("9b88"),p=n("ab74"),k=n("08e1"),g=n("1c358"),T=n("ac8e"),w=n("b3e3"),O=n("02c9"),x=n("6b64"),C=n("4b90"),A=n("225b"),N=n("e745"),j={name:"ModuleSellEth",components:{ButtonBalance:function(){return n.e("chunk-31b3e5d3").then(n.bind(null,"ad29"))},ModuleAddressBook:C["default"],BuySellTokenSelect:A["a"]},mixins:[x["a"]],props:{orderHandler:{type:Object,default:function(){}},close:{type:Function,default:function(){}},inWallet:{type:Boolean,default:!1},defaultCurrency:{type:Object,default:function(){}}},data:function(){return{selectedFiat:{name:"USD",value:"USD",img:n("1db4")},openTokenSelect:!1,selectedCurrency:this.defaultCurrency,amount:"0",fetchedData:{},locGasPrice:"0",sendHandler:{},loading:!0,hasPersistentHint:!1,fetchingBalance:!0,gasLimit:21e3,estimatingFees:!0,maxBalance:"0",selectedBalance:"0",toAddress:"",validToAddress:!1,currencyRates:[]}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(l["e"])("wallet",["address","instance","web3"])),Object(l["e"])("global",["gasPriceType"])),Object(l["c"])("wallet",["balanceInETH","balanceInWei","tokensList"])),Object(l["c"])("global",["isEthNetwork","network","gasPriceByType"])),Object(l["c"])("external",["contractToToken"])),{},{fiatCurrencyItems:function(){var e=this.hasData?this.fetchedData.fiat_currencies.filter((function(e){return"RUB"!==e})):["USD"];return Object(N["b"])(e)},persistentHintMessage:function(){return this.hasPersistentHint?"Max adjusted to leave sufficient ".concat(this.selectedCurrency.symbol," for network fee"):""},maxButton:function(){return h()(this.selectedBalance).gt(0)?{title:"Max",method:this.setMax,disabled:this.nonMainnetMetamask||h()(this.txFee).gte(this.selectedBalance)}:{}},currencyConfig:function(){var e=this.selectedFiat.value,t=this.currencyRates[e],n=e;return{rate:t,currency:n}},preselectedCurrencies:function(){var e=this;if(this.inWallet)return O["b"].reduce((function(t,n){var i=e.tokensList.find((function(e){if(e.contract.toLowerCase()===n.toLowerCase())return e}));if(i)return i.price=Object(T["b"])(i?i.price:"0").value,t.push(i),t;var a=e.contractToToken(n);return a&&(a.price=Object(T["b"])(a?a.price:"0",e.currencyConfig).value,t.push(a)),t}),[]);var t,n=new Array,i=Object(s["a"])(O["b"]);try{for(i.s();!(t=i.n()).done;){var a=t.value,r=this.contractToToken(a);r&&(r.price=Object(T["b"])(r?r.price:"0").value,n.push(r))}}catch(c){i.e(c)}finally{i.f()}return n},currencyItems:function(){var e=this.preselectedCurrencies.map((function(e){return e.name=e.symbol,e}));return e},supportedCurrency:function(){return["ETH","USDT","USDC","MATIC","BNB"]},supportedNetworks:function(){return["ETH","MATIC","BSC"]},name:function(){return this.supportedCurrency.includes(this.selectedCurrency.symbol)?this.selectedCurrency.symbol:this.network.type.currencyName},disableSell:function(){return!this.amount||""===this.amount||h()(this.amount).eq(0)||this.loading||""!==this.errorMessages||!this.actualValidAddress},min:function(){var e=this;if(!Object(d["isEmpty"])(this.fetchedData)){var t=this.fetchedData.limits.find((function(t){return t.crypto_currency===e.name&&"WEB"===t.type}));if(t)return h()(t.limit.min)}return h()(.015)},max:function(){var e=this;if(!Object(d["isEmpty"])(this.fetchedData)){var t=this.fetchedData.limits.find((function(t){return t.crypto_currency===e.name&&"WEB"===t.type}));if(t)return h()(t.limit.max)}return h()(3)},txFee:function(){return Object(m["fromWei"])(h()(this.locGasPrice).times(this.gasLimit).toString())},txFeeInEth:function(){return"".concat(h()(this.txFee).decimalPlaces(4)," ").concat(this.network.type.currencyName)},errorMessages:function(){var e,t=null!==(e=this.selectedCurrency)&&void 0!==e&&e.symbol?this.name:this.network.type.currencyName,n=h()(this.amount);if(this.nonMainnetMetamask)return"Please switch your network to the Ethereum Mainnet on Metamask.";if(h()(this.selectedBalance).eq(0)&&this.actualValidAddress)return"Address provided has no ".concat(this.selectedCurrency.symbol);if(n.isNaN()||n.eq(0))return"Amount required";if(n.lt(0))return"Amount can't be negative.";if(n.gt(0)&&n.lt(this.min))return"The minimum amount to sell is ".concat(this.min.toString()," ").concat(t,".");if(n.gt(0)&&n.gt(this.max))return"The maximum amount to sell is ".concat(this.max.toString()," ").concat(t,".");if(this.inWallet){if(n.gt(this.selectedBalance))return"You do not have enough ".concat(t," to sell.");if(!Object(d["isEmpty"])(this.sendHandler)&&!this.sendHandler.hasEnoughBalance())return"You do not have enough ETH to pay for network fee."}else if(this.actualValidAddress&&this.isValidAmount&&!this.hasEnoughAssets)return"Address provided does not have enough balance to complete the transaction";return this.amount&&!p["a"].helpers.hasValidDecimals(this.amount,this.selectedCurrency.decimals)?"Invalid decimals! Max decimals for selected currency is ".concat(this.selectedCurrency.decimals):""},nonMainnetMetamask:function(){var e;return this.instance&&this.instance.identifier===v["a"].WEB3_WALLET&&"ETH"!==(null===(e=this.network)||void 0===e?void 0:e.type.name)},isValidAmount:function(){var e;return!!this.amount&&(!!Object(d["isNumber"])(null===(e=this.selectedCurrency)||void 0===e?void 0:e.decimals)&&(!h()(this.amount).lt(0)&&p["a"].helpers.hasValidDecimals(this.amount,this.selectedCurrency.decimals)))},getCalculatedAmount:function(){var e=new h.a(this.amount?this.amount:0).times(new h.a(10).pow(this.selectedCurrency.decimals)).toFixed(0);return Object(m["toBN"])(e)},getAmountBN:function(){if(!this.isValidAmount)return Object(m["toBN"])(0);var e=Object(w["b"])(this.amount?this.amount:0,this.selectedCurrency.decimals);return Object(m["toBN"])(e)},hasEnoughAssets:function(){try{var e=Object(w["b"])(this.selectedBalance,this.selectedCurrency.decimals);return Object(m["toBN"])(e).gte(this.getAmountBN)}catch(t){return Object(y["e"])(t,{},y["a"]),!1}},actualAddress:function(){return this.inWallet?this.address:this.toAddress},actualValidAddress:function(){return!!this.inWallet||this.validToAddress},hasData:function(){return!Object(d["isEmpty"])(this.fetchedData)},cryptoAmount:function(){return h()(this.amount).times(this.priceOb.price).toString()},selectedFiatName:function(){return this.selectedFiat.name},priceOb:function(){var e=this;return Object(d["isEmpty"])(this.fetchedData)?{crypto_currency:"ETH",fiat_currency:"USD",price:"3379.08322"}:this.fetchedData.prices.find((function(t){return t.fiat_currency===e.selectedFiatName}))}}),watch:{toAddress:function(){this.amount="0"},selectedCurrency:{handler:function(e){this.maxBalance="0",this.hasPersistentHint=!1,this.selectedBalance="0",!Object(d["isEmpty"])(this.sendHandler)&&this.selectedCurrency.hasOwnProperty("name")&&this.sendHandler.setCurrency(e),this.fetchSellInfo()},deep:!0},selectedFiat:{handler:function(e,t){Object(d["isEqual"])(e,t)||this.$emit("selectedFiat",e)},deep:!0},amount:function(e){this.debouncedSetAmount(e)},gasPriceType:function(e){this.locGasPrice=this.gasPriceByType(e)},locGasPrice:function(e){this.sendHandler.setLocalGasPrice(e)},gasLimit:function(e){this.sendHandler.setGasLimit(e)},orderHandler:{handler:function(){this.sendHandler=new p["a"],this.fetchSellInfo(),this.locGasPrice=this.gasPriceByType(this.gasPriceType)},deep:!0},network:function(){this.maxBalance="0",this.hasPersistentHint=!1,this.selectedBalance="0",this.amount="0",this.selectedCurrency={},this.selectedCurrency=this.defaultCurrency,this.supportedNetworks.includes(this.network.type.name)&&(this.sendHandler=new p["a"],this.fetchSellInfo(),this.locGasPrice=this.gasPriceByType(this.gasPriceType))}},mounted:function(){this.inWallet||this.$refs.addressInput.$refs.addressSelect.clear(),this.sendHandler=new p["a"],this.fetchSellInfo(),this.locGasPrice=this.gasPriceByType(this.gasPriceType)},methods:Object(r["a"])(Object(r["a"])({},Object(l["b"])("external",["setCoinGeckoTokens"])),{},{setAddress:function(e,t,n){"RESOLVED"!==n.type||n.value.includes(".")?this.toAddress=e:this.toAddress=n.value,this.validToAddress=t,this.validToAddress&&(this.sendHandler.setFrom(this.toAddress),this.fetchSellInfo())},getEthBalance:function(){var e=this;if(this.actualValidAddress){var t=this.inWallet?this.web3:new b.a(this.network.url);t.eth.getBalance(this.actualAddress).then((function(t){e.fetchingBalance=!1,e.selectedBalance=Object(m["fromWei"])(t)}))}},getTokenBalance:function(){var e=this;if(this.actualValidAddress){var t=this.inWallet?this.web3:new b.a(this.network.url),n=new t.eth.Contract(g["a"],this.selectedCurrency.contract);n.methods.balanceOf(this.actualAddress).call().then((function(t){e.fetchingBalance=!1,e.selectedBalance=h()(t).div(h()(10).pow(e.selectedCurrency.decimals)).toString()}))}},debouncedSetAmount:Object(d["debounce"])((function(e){var t=this;if(h()(e).eq(this.maxBalance)||(this.hasPersistentHint=!1),!h()(e).lt(0)&&e&&!Object(d["isEmpty"])(this.sendHandler)&&this.isValidAmount&&this.inWallet){var n,i=h()(e||0).times(h()(10).pow(null!==(n=this.selectedCurrency)&&void 0!==n&&n.decimals?this.selectedCurrency.decimals:18)).toString();this.sendHandler.setValue(i),""===this.errorMessages&&this.hasEnoughAssets&&(this.estimatingFees=!0,this.sendHandler.estimateGas().then((function(e){t.estimatingFees=!1,t.gasLimit=e})).catch((function(e){Object(y["e"])(e,{},y["a"])})))}}),500),setCurrency:function(e){this.amount="0",this.selectedCurrency=e},setMax:function(){if(this.selectedCurrency.contract!==k["a"]||this.inWallet){var e=this.sendHandler.getEntireBal();this.amount=e?h()(e).div(h()(10).pow(this.selectedCurrency.hasOwnProperty("name")?this.selectedCurrency.decimals:18)).toString():this.selectedBalance}else this.amount=h()(this.max).lt(this.selectedBalance)?this.max.toString():h()(this.selectedBalance).minus(this.txFee).toString();this.maxBalance=this.amount,this.hasPersistentHint=!0},sell:function(){var e=this;this.orderHandler.sell(this.name,this.amount,this.actualAddress).then((function(){e.amount="0",e.close(),e.selectedCurrency=e.defaultCurrency})).catch((function(t){Object(y["e"])(t,{},y["a"]),e.amount="0",e.close(),e.selectedCurrency=e.defaultCurrency}))},fetchSellInfo:function(){var e=this;this.actualValidAddress&&this.selectedCurrency.contract?(this.fetchingBalance=!0,this.selectedCurrency.contract===k["a"]?this.getEthBalance():this.getTokenBalance(),this.hasEnoughAssets&&(this.sendHandler.setFrom(this.actualAddress),this.sendHandler.setCurrency(this.selectedCurrency),this.sendHandler.setValue(this.getCalculatedAmount),this.sendHandler.setTo("0xDECAF9CD2367cdbb726E904cD6397eDFcAe6068D","TYPED"),this.estimatingFees=!0,this.sendHandler.estimateGas().then((function(t){e.estimatingFees=!1,e.gasLimit=t})).catch((function(e){Object(y["e"])(e,{},y["a"])})))):(this.fetchingBalance=!1,this.selectedBalance=Object(m["fromWei"])("0")),this.orderHandler.getSupportedFiatToSell(this.name).then((function(t){e.loading=!1,e.fetchedData=t[0]})).catch((function(t){e.loading=!1,Object(y["e"])(t,{},y["a"])}))},isValidToAddress:function(e){return o.a.validate(e,this.selectedCurrency.symbol)},preventCharE:function(e){"e"===e.key&&e.preventDefault()}})},S=j,B=(n("14cc"),n("7d7f"),n("2877")),E=Object(B["a"])(S,i,a,!1,null,"04d4e172",null);t["default"]=E.exports},6379:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getEthBalance"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hash"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getEthBalance"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"hash"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getLatestPrices"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getLatestPrices"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"symbol"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contract"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"current_price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"market_cap"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_volume"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price_change_percentage_24h"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_supply"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"subscription",name:{kind:"Name",value:"subscribeToAccountBalance"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"event"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddressEventType"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addressEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"event"},value:{kind:"Variable",name:{kind:"Name",value:"event"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"blockNumber"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:448}};n.loc.source={body:"query getEthBalance($hash: String!) {\n  getEthBalance(owner: $hash) {\n    balance\n  }\n}\n\nquery getLatestPrices {\n  getLatestPrices {\n    id\n    symbol\n    name\n    image\n    contract\n    current_price\n    market_cap\n    total_volume\n    price_change_percentage_24h\n    total_supply\n  }\n}\n\nsubscription subscribeToAccountBalance(\n  $owner: String!\n  $event: AddressEventType!\n) {\n  addressEvent(owner: $owner, event: $event) {\n    blockNumber\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function i(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){i(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){i(e,t)})),e.definitions&&e.definitions.forEach((function(e){i(e,t)}))}var a={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}function r(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,r=new Set,c=new Set;i.forEach((function(e){c.add(e)}));while(c.size>0){var o=c;c=new Set,o.forEach((function(e){if(!r.has(e)){r.add(e);var t=a[e]||new Set;t.forEach((function(e){c.add(e)}))}}))}return r.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(function(){n.definitions.forEach((function(e){if(e.name){var t=new Set;i(e,t),a[e.name.value]=t}}))})(),e.exports=n,e.exports["getEthBalance"]=r(n,"getEthBalance"),e.exports["getLatestPrices"]=r(n,"getLatestPrices"),e.exports["subscribeToAccountBalance"]=r(n,"subscribeToAccountBalance")},"6b64":function(e,t,n){"use strict";var i=n("5530"),a=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("159b"),n("2f62")),s=n("6379"),r=n("9b88");t["a"]={name:"HandlerWallet",data:function(){return{getLatestPrices:"",tokensData:{}}},apollo:{getLatestPrices:{query:s["getLatestPrices"],pollInterval:6e5,result:function(e){var t=this,n=e.data;this.tokensData=new Map,n&&n.getLatestPrices&&(n.getLatestPrices.forEach((function(e){t.tokensData.set(e.id,e)})),this.setCoinGeckoTokens(this.tokensData))},error:function(e){Object(r["e"])(e.message,{},r["a"])}}},methods:Object(i["a"])({},Object(a["b"])("external",["setCoinGeckoTokens"]))}},"7d7f":function(e,t,n){"use strict";n("0f3a")},"7e38":function(e,t,n){},ab74:function(e,t,n){"use strict";var i=n("c7eb"),a=n("1da1"),s=n("d4ec"),r=n("bee2"),c=(n("b680"),n("4c53"),n("bf19"),n("5ba3")),o=n("d6fd"),l=n("7466"),d=n("ced0"),u=n("2f62"),h=n("27ca"),m={INVALID_TO_ADDRESS:"Invalid to address",INVALID_FROM_ADDRESS:"Invalid from address",INVALID_DATA_HEX:"Invalid hex string for data",NEGATIVE_VALUE:"negative value"},f=n("6e11"),b=n.n(f),v=n("08e1"),y=n("6013"),p=n("2ef0"),k=n("901e"),g=n.n(k),T=n("ac8e"),w=function(){function e(){Object(s["a"])(this,e),this.$store=h["a"],Object.assign(this,Object(u["e"])("wallet",["balance","web3","address"])),Object.assign(this,Object(u["c"])("global",["network"])),this.currency=null,this.localGasPrice="0",this.TX={from:"0x",to:"0x",destination:"0x",nonce:"0x",gasPrice:"0x",gas:"0x5208",value:"0x",destinationValue:"0x",data:"0x"}}return Object(r["a"])(e,[{key:"setTo",value:function(e,t){if(!Object(o["a"])(e))throw m.INVALID_TO_ADDRESS;this.TX.destination=e,this.TX.toDetails=t}},{key:"_setTo",value:function(){this.TX.to=this.isToken()?Object(c["toChecksumAddress"])(this.currency.contract):Object(c["toChecksumAddress"])(this.TX.destination)}},{key:"setFrom",value:function(e){if(!Object(o["a"])(e))throw m.INVALID_FROM_ADDRESS;this.TX.from=e}},{key:"_setGasPrice",value:function(){this.TX.gasPrice=Object(c["toHex"])(Object(c["toBN"])(this.localGasPrice))}},{key:"setGasLimit",value:function(e){this.TX.gas=Object(c["toHex"])(Object(c["toBN"])(e))}},{key:"setLocalGasPrice",value:function(e){this.localGasPrice=Object(c["toHex"])(Object(c["toBN"])(e))}},{key:"setValue",value:function(e){(isNaN(e)||Object(p["isNull"])(e))&&(e=0);var t=new g.a(e);if(t.lt(0))throw m.NEGATIVE_VALUE;this.TX.destinationValue=Object(c["toHex"])(t.toFixed())}},{key:"_setValue",value:function(){this.isToken()?(this.TX.value="0x00",this.setData(this.getTokenTransferABI(this.TX.destinationValue,this.TX.destination))):this.TX.value=Object(c["toHex"])(Object(c["toBN"])(this.TX.destinationValue))}},{key:"setData",value:function(e){if(!Object(c["isHexStrict"])(e))throw m.INVALID_DATA_HEX;this.TX.data=Object(l["a"])(e)}},{key:"setNonce",value:function(e){this.TX.nonce=Object(c["toHex"])(Object(c["toBN"])(e))}},{key:"setCurrency",value:function(e){this.currency=e,this.TX.data="0x"}},{key:"getEntireBal",value:function(){if(this.isToken())return this.currency.balance;var e=Object(c["toBN"])(this.localGasPrice),t=e.mul(Object(c["toBN"])(this.TX.gas));return this.balance().gt(this.balance().sub(t))?this.balance().sub(t):0}},{key:"txFee",value:function(){return Object(c["toBN"])(this.localGasPrice).mul(Object(c["toBN"])(this.TX.gas))}},{key:"estimateGas",value:function(){return this.address()&&this.setFrom(this.address()),this._setTo(),this._setValue(),this._setGasPrice(),this.web3().eth.estimateGas({data:this.TX.data,from:this.TX.from,to:this.TX.to,value:this.TX.value})}},{key:"isToken",value:function(){var e;return(null===(e=this.currency)||void 0===e?void 0:e.contract)!==v["a"]}},{key:"hasEnoughBalance",value:function(){var e=Object(c["toBN"])(this.TX.destinationValue);if(this.isToken()&&this.currency.balance){var t=e.lte(Object(T["h"])(this.currency.balance)),n=this.txFee().lte(this.balance());return t&&n}return e.add(this.txFee()).lte(this.balance())}},{key:"getTokenTransferABI",value:function(e,t){e=Object(c["toBN"])(e);var n=[{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],i=new b.a(n);return i.methods.transfer(t.toLowerCase(),e).encodeABI()}},{key:"submitTransaction",value:function(){var e=Object(a["a"])(Object(i["a"])().mark((function e(){var t,n,a;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this._setTo(),this._setValue(),this._setGasPrice(),e.next=6,this.web3().eth.getTransactionCount(this.address());case 6:return t=e.sent,this.setNonce(t),this.TX.gasLimit=this.TX.gas,n=d["Transaction"].fromTxData(this.TX),a=n.toJSON(!0),a.from=this.address(),a.toDetails=this.TX.toDetails,e.abrupt("return",this.web3().eth.sendTransaction(a));case 16:return e.prev=16,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}();w.helpers={hasValidDecimals:y["a"]};t["a"]=w},bf19:function(e,t,n){"use strict";var i=n("23e7"),a=n("c65b");i({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return a(URL.prototype.toString,this)}})}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-26533e56.6addc48a.js.map