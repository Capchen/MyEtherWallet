(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ddbfd"],{"835a":function(e,s,t){"use strict";t.r(s);var d=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"full-width"},[e.addMode?t("mew-input",{attrs:{"show-blockie":!0,label:e.$t("interface.address-book.address"),placeholder:e.$t("interface.address-book.enter-addr"),value:e.addressToAdd,rules:e.addressRules,"persistent-hint":e.validAddress,hint:e.resolvedName||e.nametag||e.coin,"resolved-addr":e.resolvedAddress,autofocus:""},on:{input:e.setAddress}}):e._e(),e.editMode?t("div",{staticClass:"full-width d-flex align-center mb-7"},[t("mew-blockie",{staticClass:"mr-3",attrs:{address:e.item.resolvedAddr?e.item.resolvedAddr:e.item.address,height:"45px",width:"45px"}}),t("div",{staticClass:"truncate"},[t("h5",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e.$t("interface.address-book.address"))+" ")]),t("div",{staticClass:"d-flex align-center"},[t("span",{staticClass:"monospace mr-3 truncate",attrs:{id:"item-addr"}},[e._v(" "+e._s(e.checksumAddressToAdd)+" ")]),t("mew-copy",{attrs:{"copy-value":e.item.address,tooltip:e.$t("common.copy")}})],1)])],1):e._e(),t("mew-input",{staticClass:"mt-2",attrs:{label:e.$t("interface.address-book.nickname"),placeholder:e.nickname?e.nickname:e.$t("interface.address-book.enter-nickname"),value:e.nickname,rules:e.nicknameRules},on:{input:e.setNickname}}),t("div",{staticClass:"text-center mt-4"},[t("mew-button",{attrs:{disabled:e.disabled,title:e.editMode?e.$t("interface.address-book.update"):e.$t("common.confirm-add"),"btn-size":"xlarge"},nativeOn:{click:function(s){e.editMode?e.update():e.add()}}})],1),e.editMode?t("div",{staticClass:"mt-4 text-center"},[t("mew-button",{attrs:{title:e.$t("interface.address-book.remove-addr"),"has-full-width":!1,"btn-size":"small","btn-style":"transparent"},nativeOn:{click:function(s){return e.remove.apply(null,arguments)}}})],1):e._e()],1)},r=[],i=t("c7eb"),o=t("1da1"),n=t("5530"),a=(t("caad"),t("2532"),t("d3b7"),t("b64b"),t("c740"),t("b0c0"),t("a434"),t("14d9"),t("25f0"),t("2f62")),c=t("2ef0"),l=t("48b6"),h=t("677b"),u=t("d6fd"),v=t("b85c"),m=t("1b74"),A=t.n(m),k=["Ethereum","Bitcoin","Algorand","AuroraCoin","BeaverCoin","BioCoin","Bitcoin SV","BitcoinCash","BitcoinGold","BitcoinPrivate","BitcoinZ","Cardano","Crypto.com Coin","Dash","Decred","DigiByte","DogeCoin","FreiCoin","GarliCoin","Hush","HyperSpace","Komodo","LBRY Credits","Lisk","LiteCoin","loki","MegaCoin","MonaCoin","Monero","NameCoin","Nano","Nem","Neo","NeoGas","PeerCoin","PIVX","Polkadot","PrimeCoin","ProtoShares","Qtum","RaiBlocks","Ripple","Siacoin","SnowGem","SolarCoin","Stellar","Tether","Tezos","Tron","VertCoin","VoteCoin","Waves","ZCash","ZClassic","ZenCash"];function f(e){var s,t=Object(v["a"])(k);try{for(t.s();!(s=t.n()).done;){var d=s.value;if(A.a.validate(e,d))return{coin:d,valid:!0}}}catch(r){t.e(r)}finally{t.f()}return{coin:"",valid:!1}}var b=["add","edit"],p={name:"AddressBookAddEdit",props:{mode:{default:b[0],type:String},item:{default:function(){},type:Object},toAddress:{default:"",type:String}},data:function(){return{resolvedAddr:"",nameResolver:null,currentIdx:null,nickname:"",addressToAdd:"",nametag:""}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(a["e"])("wallet",["address","web3"])),Object(a["e"])("addressBook",["addressBookStore"])),Object(a["c"])("global",["network"])),{},{disabled:function(){var e,s;return this.addMode?!this.addressToAdd||!this.validAddress||Object(c["isEmpty"])(this.nickname)||(null===(e=this.nickname)||void 0===e?void 0:e.length)>20||this.alreadyExists:!this.editMode||(this.nickname===this.item.nickname||(null===(s=this.nickname)||void 0===s?void 0:s.length)>20||Object(c["isEmpty"])(this.nickname))},addressRules:function(){var e=this;return[function(){return!e.alreadyExists||e.$t("interface.address-book.validations.already-exists")},this.validAddress||this.$t("interface.address-book.validations.invalid-address"),function(s){return!!s||e.$t("interface.address-book.validations.addr-required")}]},nicknameRules:function(){var e=this;return[function(s){return s&&s.length>=1||e.$t("interface.address-book.validations.nickname-required")},function(s){return s&&s.length<=20||e.$t("interface.address-book.validations.nickname-length")}]},validAddress:function(){var e;return!(this.addressToAdd.length>94)&&(this.resolvedAddr.length>0&&(null===(e=this.resolvedAddr)||void 0===e||!e.includes("."))?Object(u["a"])(this.resolvedAddr)||f(this.resolvedAddr).valid:Object(u["a"])(this.lowercaseAddressToAdd)||f(this.lowercaseAddressToAdd).valid||f(this.addressToAdd).valid)},coin:function(){return this.validAddress?"Valid ".concat(this.coinType," address"):""},coinType:function(){var e;return this.resolvedAddr.length>0&&(null===(e=this.resolvedAddr)||void 0===e||!e.includes("."))?f(this.resolvedAddr).coin:f(this.lowercaseAddressToAdd).coin||f(this.addressToAdd).coin},editMode:function(){return this.mode===b[1]},addMode:function(){return this.mode===b[0]},isMyAddress:function(){var e,s,t,d;return(null===(e=this.address)||void 0===e?void 0:e.toLowerCase())===(null===(s=this.addressToAdd)||void 0===s?void 0:s.toLowerCase())||(null===(t=this.address)||void 0===t?void 0:t.toLowerCase())===(null===(d=this.resolvedAddr)||void 0===d?void 0:d.toLowerCase())},alreadyExists:function(){return!!this.addMode&&(!!this.isMyAddress||(this.checkResolvedExists||this.checkAddressExists))},checkResolvedExists:function(){var e=this;return Object.keys(this.addressBookStore).some((function(s){var t,d,r=e.addressBookStore[s];return""!==e.resolvedAddr&&(r.address.toLowerCase()===(null===(t=e.resolvedAddr)||void 0===t?void 0:t.toLowerCase())||r.resolvedAddr.toLowerCase()===(null===(d=e.resolvedAddr)||void 0===d?void 0:d.toLowerCase()))}))},checkAddressExists:function(){var e=this;return Object.keys(this.addressBookStore).some((function(s){var t,d,r,i=e.addressBookStore[s];return""!==i.resolvedAddr&&(null===(t=i.resolvedAddr)||void 0===t?void 0:t.toLowerCase())===(null===(d=e.addressToAdd)||void 0===d?void 0:d.toLowerCase())||i.address.toLowerCase()===(null===(r=e.addressToAdd)||void 0===r?void 0:r.toLowerCase())}))},checksumAddressToAdd:function(){return""!==this.addressToAdd&&Object(u["a"])(this.lowercaseAddressToAdd)?Object(u["b"])(this.lowercaseAddressToAdd):this.addressToAdd},lowercaseAddressToAdd:function(){return this.addressToAdd.toLowerCase()},resolvedAddress:function(){var e;return 0===this.resolvedAddr.length||!this.validAddress||null!==(e=this.resolvedAddr)&&void 0!==e&&e.includes(".")?"":this.resolvedAddr},resolvedName:function(){var e;return 0===this.resolvedAddr.length?"":this.validAddress&&null!==(e=this.resolvedAddr)&&void 0!==e&&e.includes(".")?this.resolvedAddr:""}}),watch:{toAddress:function(e){this.addressToAdd=e},addressToAdd:function(e){this.nametag="",Object(u["a"])(e.toLowerCase())?this.resolveAddress():this.resolveName()},web3:function(){this.network.type.ens?this.nameResolver=new h["a"](this.network,this.web3):this.nameResolver=null}},mounted:function(){var e=this;this.network.type.ens&&(this.nameResolver=new h["a"](this.network,this.web3)),this.addMode&&this.toAddress&&(this.addressToAdd=this.toAddress),this.editMode&&(this.addressToAdd=this.item.address,this.nickname=this.item.nickname,this.currentIdx=this.addressBookStore.findIndex((function(s){return s.address===e.item.address})))},methods:Object(n["a"])(Object(n["a"])({},Object(a["b"])("addressBook",["setAddressBook"])),{},{reset:function(){this.addressToAdd="",this.nickname="",this.resolvedAddr="",this.nametag=""},resolveAddress:Object(c["throttle"])(Object(o["a"])(Object(i["a"])().mark((function e(){var s,t=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.nameResolver){e.next=15;break}return e.prev=1,e.next=4,this.nameResolver.resolveAddress(this.addressToAdd);case 4:if(s=e.sent,!s||s.name){e.next=8;break}return e.next=8,Object(l["getAddressInfo"])(this.checksumAddressToAdd,"https://ipfs.kleros.io").then((function(e){t.nametag=(null===e||void 0===e?void 0:e.publicNameTag)||""}));case 8:this.resolvedAddr=s.name?s.name:"",e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](1),this.nametag="",this.resolvedAddr="";case 15:case"end":return e.stop()}}),e,this,[[1,11]])}))),300),resolveName:Object(c["throttle"])(Object(o["a"])(Object(i["a"])().mark((function e(){var s=this;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.nameResolver){e.next=9;break}return e.prev=1,e.next=4,this.nameResolver.resolveName(this.addressToAdd).then((function(e){s.resolvedAddr=e}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),this.resolvedAddr="";case 9:case"end":return e.stop()}}),e,this,[[1,6]])}))),500),setAddress:function(e){this.addressToAdd=e||""},setNickname:function(e){this.nickname=e},update:function(){this.addressBookStore[this.currentIdx].address=this.checksumAddressToAdd,this.addressBookStore[this.currentIdx].coinType=this.coinType.toLowerCase(),this.addressBookStore[this.currentIdx].nickname=this.nickname,this.setAddressBook(this.addressBookStore),this.$emit("back",[3])},remove:function(){this.addressBookStore.splice(this.currentIdx,1),this.setAddressBook(this.addressBookStore),this.reset(),this.$emit("back",[3])},add:function(){this.alreadyExists?this.reset():(this.addressBookStore.push({address:this.checksumAddressToAdd,resolvedAddr:this.resolvedAddress,coinType:this.coinType.toLowerCase(),nickname:this.nickname||(this.addressBookStore.length+1).toString()}),this.setAddressBook(this.addressBookStore),this.reset(),this.$emit("back",[3]))}})},w=p,C=t("2877"),T=Object(C["a"])(w,d,r,!1,null,null,null);s["default"]=T.exports}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-2d0ddbfd.586d6e64.js.map