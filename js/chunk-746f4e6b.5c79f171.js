(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-746f4e6b"],{"2d1ce":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-dialog",{attrs:{persistent:"","max-width":"500"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-sheet",{staticClass:"pa-5",attrs:{color:"white"}},[s("h3",{staticClass:"mb-5 text-center"},[t._v("Transaction status")]),t.txLoading?s("div",{staticClass:"pa-5"},[s("v-progress-linear",{attrs:{indeterminate:"",rounded:"",height:"6"}})],1):t._e(),t.txLoading?t._e():s("v-alert",{attrs:{type:t.status?"success":"error"}},[t._v(t._s(t.status?"Success":"Failed"))]),t.txHash?s("div",{staticClass:"greyLight pa-5 mb-2"},[s("div",{staticClass:"font-weight-bold"},[t._v("Transaction Hash")]),s("div",{staticClass:"d-flex"},[s("mew-transform-hash",{attrs:{hash:t.txHash}}),s("mew-copy",{staticClass:"ml-2",attrs:{"copy-value":t.txHash,tooltip:"Copy Me!"}})],1)]):t._e(),s("div",{staticClass:"pa-5"},[t.dialogAlert?s("mew-alert",{attrs:{"hide-close-icon":"",theme:"error",title:"Error",description:t.dialogAlert}}):t._e()],1),s("div",{staticClass:"text-center"},[s("mew-button",{staticClass:"mt-6",attrs:{title:"Close","btn-size":"xlarge"},nativeOn:{click:function(e){return t.dismiss.apply(null,arguments)}}})],1)],1)],1),s("mew-module",{staticClass:"pt-6",attrs:{title:t.title.title,"has-elevation":!0,"has-indicator":!0},scopedSlots:t._u([{key:"moduleBody",fn:function(){return[s("mew-stepper",{attrs:{items:t.stepperItems,"on-step":t.currentStep}}),t.$vuetify.breakpoint.mdAndDown?s("h5",{staticClass:"text-center font-weight-medium"},[t._v(" "+t._s(t.stepperItems[t.currentStep-1].name)+" ")]):t._e(),1===t.currentStep?s("div",[s("v-sheet",{staticClass:"mx-auto py-10",attrs:{color:"transparent","max-width":"600px"}},[s("network-switch")],1),s("mew-button",{staticClass:"mx-auto display--block NextButton",attrs:{"btn-size":"xlarge",title:"Next"},nativeOn:{click:function(e){t.currentStep=2}}})],1):t._e(),2===t.currentStep?s("div",[s("v-sheet",{staticClass:"mx-auto py-10",attrs:{color:"transparent","max-width":"600px"}},[s("mew-address-select",{staticClass:"OfflineAddressInput",attrs:{label:"From Address","copy-tooltip":"Copy","save-tooltip":"Save Address","show-copy":t.detailLength,"show-save":!1,items:t.addresses,"enable-save-address":!1,"is-valid-address":t.detailLength,"address-value":t.fromAddress,"error-messages":t.fromAddressMessage},on:{input:t.setAddress}}),t.detailLength?s("mew-expand-panel",{staticClass:"mt-4 mb-10 swap-expend OfflineDetails",attrs:{"is-toggle":"","has-dividers":"","panel-items":t.exPanelStep2},scopedSlots:t._u([{key:"panelBody1",fn:function(){return t._l(t.details,(function(e,a){return s("div",{key:a,staticClass:"d-flex align-center justify-space-between mb-3 px-5"},[e.title?s("div",{staticClass:"pr-3"},[t._v(t._s(e.title))]):t._e(),e.value?s("div",{staticClass:"text-right"},[t._v(t._s(e.value))]):t._e(),e.address?s("mew-transform-hash",{attrs:{hash:e.address}}):t._e()],1)}))},proxy:!0}],null,!1,2233926829)}):t._e(),s("div",{staticClass:"d-block d-lg-flex justify-center mt-2 text-center"},[s("mew-button",{staticClass:"mx-1 mb-3",attrs:{title:"Back","btn-size":"xlarge","btn-style":"outline"},nativeOn:{click:function(e){return t.handleBack.apply(null,arguments)}}}),s("mew-button",{staticClass:"mx-1 mb-3 NextButton2",attrs:{title:"Next","btn-size":"xlarge",disabled:!t.detailLength},nativeOn:{click:function(e){t.currentStep=3}}})],1),t.detailLength?s("mew-button",{staticClass:"mt-2 display--block mx-auto DownloadButton",attrs:{title:"Export JSON file","btn-size":"small","btn-style":"transparent","btn-link":t.fileLink,download:t.exportFileName}}):t._e()],1)],1):t._e(),3===t.currentStep?s("div",[s("v-sheet",{staticClass:"mx-auto py-10",attrs:{color:"transparent","max-width":"600px"}},[s("v-textarea",{staticClass:"mb-1 SignatureInput",attrs:{outlined:"",label:"Signature",value:t.signature,error:t.signatureError,"error-messages":t.signatureMessage},on:{input:t.checkTx}}),t._l(t.sortedAlerts,(function(t){return s("mew-alert",{key:t.key,staticClass:"mb-3",attrs:{"hide-close-icon":"",theme:t.severity,title:t.title,description:t.message}})})),t.signatureError||""===t.signature?t._e():s("mew-expand-panel",{staticClass:"mt-4 mb-10 swap-expend SignatureRawDetails",attrs:{"is-toggle":"","has-dividers":"","panel-items":t.exPanelStep3},scopedSlots:t._u([{key:"panelBody1",fn:function(){return[s("div",{staticClass:"d-flex align-center justify-space-between mb-3 px-5"},[s("v-textarea",{attrs:{readonly:"","auto-grow":"",value:t.rawTransaction}})],1)]},proxy:!0},{key:"panelBody2",fn:function(){return t._l(t.transactionDetails,(function(e,a){return s("div",{key:a,staticClass:"d-flex align-center justify-space-between mb-3 pa-5"},[e.title?s("div",{staticClass:"pr-3"},[t._v(t._s(e.title))]):t._e(),e.value?s("div",{staticClass:"text-right",staticStyle:{"overflow-x":"hidden","text-overflow":"ellipsis"}},[t._v(" "+t._s(e.value)+" ")]):t._e(),e.address?s("mew-transform-hash",{attrs:{hash:e.address}}):t._e()],1)}))},proxy:!0}],null,!1,309422960)}),s("div",{staticClass:"d-block d-lg-flex justify-center mt-2 text-center"},[s("mew-button",{staticClass:"mx-1 mb-3",attrs:{title:"Back","btn-size":"xlarge","btn-style":"outline"},nativeOn:{click:function(e){return t.handleBack.apply(null,arguments)}}}),s("mew-button",{staticClass:"mx-1 mb-3 ConfirmSendButton",attrs:{title:"Confirm & Send","btn-size":"xlarge",disabled:!t.validTx||t.error},nativeOn:{click:function(e){return t.sendTx.apply(null,arguments)}}})],1),s("div",{staticClass:"d-flex justify-center"},[s("input",{ref:"uploadSig",staticStyle:{display:"none"},attrs:{type:"file",accept:"json"},on:{change:t.uploadFile}}),s("mew-button",{staticClass:"mt-2 display--block mx-auto",attrs:{title:"Upload JSON file","btn-size":"small","btn-style":"transparent"},nativeOn:{click:function(e){return t.$refs.uploadSig.click()}}})],1)],2)],1):t._e()]},proxy:!0}])})],1)},r=[],i=s("c7eb"),n=s("1da1"),l=s("5530"),o=(s("d3b7"),s("3ca3"),s("ddb0"),s("99af"),s("4e82"),s("4de4"),s("25f0"),s("e9c4"),s("2b3d"),s("9861"),s("b680"),s("bf19"),s("b64b"),s("7db0"),s("caad"),s("2532"),s("d9e2"),s("2f62")),c=s("5ba3"),d=s("8d23"),u=s("901e"),h=s("5b66"),g=s("2ef0"),p=s("0037"),m=s("7466"),f={name:"ModuleToolsOfflineHelper",components:{NetworkSwitch:function(){return s.e("chunk-279441fc").then(s.bind(null,"78da"))}},props:{isHomePage:{type:Boolean,default:!0}},data:function(){return{dialog:!1,currentStep:1,fromAddress:"",fromAddressMessage:[],details:[],exportFileName:"",signature:"",signatureError:!1,signatureMessage:[],rawTransaction:"",transactionDetails:[],validTx:!1,file:{},fileLink:"",alerts:[],dialogAlert:"",txHash:"",status:!1,txLoading:!1,title:{title:"Send Offline Helper",description:"Use this tool to help you sign transactions securely on an offline computer"},exPanelStep2:[{name:"Details"}],exPanelStep3:[{name:"Raw transaction"},{name:"Details"}],stepperItems:[{step:1,name:"STEP 1. Select network"},{step:2,name:"STEP 2. Generate information"},{step:3,name:"STEP 3. Signed transaction"}]}},computed:Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])(Object(l["a"])({},Object(o["e"])("wallet",["web3"])),Object(o["e"])("addressBook",["addressBookStore"])),Object(o["e"])("wallet",["address"])),Object(o["c"])("global",["network"])),{},{addresses:function(){return this.isHomePage?[{address:"0xDECAF9CD2367cdbb726E904cD6397eDFcAe6068D",currency:"ETH",nickname:"MEW Donations",resolverAddr:"0xDECAF9CD2367cdbb726E904cD6397eDFcAe6068D"}]:this.address?[{address:Object(h["toChecksumAddress"])(this.address),nickname:"My Address",resolverAddr:""}]:[].concat(this.addressBookStore)},detailLength:function(){return this.details.length>0},sortedAlerts:function(){var t=this.alerts;return t.sort((function(t,e){return t.severity>e.severity?1:t.severity<e.severity?-1:0}))},error:function(){return!!this.alerts.filter((function(t){return"error"===t.severity})).length},getRawTransaction:function(){var t=this.signature;try{t=JSON.parse(t),Object(g["isEmpty"])(t)||t.rawTransaction&&(t=Object(m["a"])(t.rawTransaction))}catch(e){t=Object(m["a"])(t)}return t}}),methods:{handleBack:function(){3===this.currentStep&&this.checkTx(""),this.currentStep-=1},clear:function(){this.fromAddress="",this.rawTransaction="",this.signature="",this.currentStep=1,this.dialogAlert=""},dismiss:function(){this.dialog=!1,this.dialogAlert="",this.txHash=""},setAddress:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.fromAddress=t,Object(c["isAddress"])(this.fromAddress))return this.fromAddressMessage.length&&(this.fromAddressMessage=[]),void this.setDetails();this.details.length>1&&this.setDetails([]),null!==this.fromAddress&&""!==this.fromAddress?this.fromAddressMessage=["Not a valid Address"]:this.fromAddressMessage.length&&(this.fromAddressMessage=[])},data:function(){var t=this;return Object(n["a"])(Object(i["a"])().mark((function e(){var s,a,r,n;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.web3.eth,e.next=3,s.getChainId();case 3:return a=e.sent,e.next=6,s.getGasPrice();case 6:return r=e.sent,e.next=9,s.getTransactionCount(t.fromAddress);case 9:return n=e.sent,e.abrupt("return",{data:{nonce:n,gasPrice:r},details:{address:t.fromAddress,nonce:n.toString(),chainID:a,gasLimit:"21000",gasPrice:r}});case 11:case"end":return e.stop()}}),e)})))()},setDetails:function(t){var e=this;return Object(n["a"])(Object(i["a"])().mark((function s(){var a,r;return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t){s.next=2;break}return s.abrupt("return",e.details=t);case 2:return s.next=4,e.data();case 4:a=s.sent,r=a.details,e.details=[{title:"Sender",value:"",address:r.address},{title:"Nonce",value:r.nonce},{title:"Date",value:Date()},{title:"Chain ID",value:r.chainID},{title:"Gas Limit",value:r.gasLimit},{title:"Gas Price",value:r.gasPrice}],e.exportFile();case 8:case"end":return s.stop()}}),s)})))()},exportFile:function(){var t=this;return Object(n["a"])(Object(i["a"])().mark((function e(){var s,a,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.data();case 2:s=e.sent,a=s.data,a={nonce:Object(c["toHex"])(a.nonce),gasPrice:Object(c["toHex"])(a.gasPrice)},r=new Blob([JSON.stringify(a)],{type:"mime"}),t.fileLink=window.URL.createObjectURL(r),t.exportFileName="generated-offline-tx-".concat(Date.now(),".json");case 8:case"end":return e.stop()}}),e)})))()},checkTx:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.signature=t,""===this.signature)return this.signatureError=!1,this.signatureMessage=[],this.alerts=[],void(this.validTx=!1);this.signatureError&&(this.signatureError=!1,this.signatureMessage=[]),this.alerts.length&&(this.alerts=[]),this.setRawTransaction(),this.setRawDetails()},gtr:function(t){return new u["BigNumber"](t).gt(0)?new u["BigNumber"](t).toFixed():"0"},rawData:function(){try{var t=new d["Transaction"](this.getRawTransaction,{common:Object(p["a"])(this.network)}),e=t.toJSON(!0),s=t.getChainId(),a=Object(m["a"])(t.getSenderAddress().toString("hex"));this.validTx=t.verifySignature();var r=t.getBaseFee().toString(),i={from:a,nonce:this.gtr(e.nonce),gasPrice:Object(c["fromWei"])(this.gtr(e.gasPrice)),gasLimit:this.gtr(e.gasLimit),to:e.to,value:Object(c["fromWei"])(this.gtr(e.value),"ether"),data:e.data};return{fee:r,raw:Object(l["a"])({},i),details:Object(l["a"])(Object(l["a"])({},i),{},{chainID:s})}}catch(g){var n=g.message,o={"invalid rlp: total length is larger than the data":"Malformed signature","chain id":"Incorrect network selected"};this.signatureError=!0,this.validTx=!1;var u=Object.keys(o),h=u.find((function(t){return!!n&&n.includes(t)}));return this.signatureMessage=h?[o[h]]:["Must be a valid transaction"],{}}},setRawTransaction:function(t){var e=this;return Object(n["a"])(Object(i["a"])().mark((function s(){var a,r,n,l,o,c;return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!t){s.next=2;break}return s.abrupt("return",e.rawTransaction=t);case 2:if(a=e.rawData(),r=a.raw,n=a.fee,!r){s.next=12;break}return e.rawTransaction=JSON.stringify(r,null,3),l=e.web3.eth,o=Object(h["toChecksumAddress"])(r.from)===Object(h["toChecksumAddress"])(e.fromAddress),s.next=9,l.getBalance(r.from);case 9:c=s.sent,o||e.alerts.push({name:"addressMatch",severity:"warning",title:"Warning",message:"Signer does not match selected address!"}),Object(u["BigNumber"])(c).lt(n)&&e.alerts.push({name:"balance",severity:"error",title:"Error",message:"Current address can't afford this transaction"});case 12:case"end":return s.stop()}}),s)})))()},setRawDetails:function(t){if(t)return this.transactionDetails=t;var e=this.rawData(),s=e.details;s&&(this.transactionDetails=[{title:"From",value:"",address:s.from},{title:"To",value:"",address:s.to},{title:"Value",value:s.value},{title:"Gas Price",value:s.gasPrice},{title:"Gas Limit",value:s.gasLimit},{title:"Data",value:s.data},{title:"Chain Id",value:s.chainID}])},uploadFile:function(t){var e=t.target.files,s=new FileReader,a=this;s.onloadend=function(t){var e=t.target.result;try{if(a.file=JSON.parse(e),!Object(g["isEmpty"])(a.file)&&a.file.rawTransaction)return a.checkTx(a.file.rawTransaction),void(a.$refs.uploadSig.value="");throw Error()}catch(s){a.signatureError=!0,a.signatureMessage=["Bad signature upload"]}},e[0]&&s.readAsBinaryString(e[0])},sendTx:function(){var t=this,e=this.web3.eth;this.dialog=!0,this.txLoading=!0,e.sendSignedTransaction(this.getRawTransaction).once("transactionHash",(function(e){t.txHash=e,t.clear()})).once("receipt",(function(e){var s=e.status;t.status=s,t.txLoading=!1})).catch((function(e){var s=e.message;t.dialogAlert=s,t.txLoading=!1}))}}},v=f,b=s("2877"),x=Object(b["a"])(v,a,r,!1,null,null,null);e["default"]=x.exports}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-746f4e6b.5c79f171.js.map