(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22d2e242"],{"42c8":function(t,e,i){"use strict";i("b56e")},"58cd":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"py-8 px-8 moonpay-buy-component"},[i("div",{staticClass:"mt-2"},[i("div",{staticClass:"font-weight-medium textDark--text mb-2"},[t._v(" How much do you want to spend? ")]),i("div",{staticClass:"d-flex align-center"},[i("mew-input",{staticClass:"no-right-border",staticStyle:{"max-height":"92px","max-width":"251px"},attrs:{"hide-clear-btn":"",type:"number","error-messages":t.amountErrorMessages},nativeOn:{keydown:function(e){return t.preventCharE(e)}},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),i("mew-select",{staticClass:"selectedFiat no-left-border",staticStyle:{"max-width":"135px","margin-top":"-30px"},attrs:{items:t.fiatCurrencyItems,"is-custom":""},model:{value:t.selectedFiat,callback:function(e){t.selectedFiat=e},expression:"selectedFiat"}})],1)]),i("div",{staticClass:"mt-2"},[i("div",{staticClass:"d-flex align-center mb-2"},[i("div",{staticClass:"font-weight-medium textDark--text mr-1"},[t._v("You will get")]),i("mew-tooltip",{staticStyle:{height:"21px"},scopedSlots:t._u([{key:"contentSlot",fn:function(){return[i("div",[t._v(" "+t._s(t.includesFeeText)+" "),i("br"),i("br"),t._v(" "+t._s(t.networkFeeText)+" "),i("br"),i("br"),t._v(" "+t._s(t.dailyLimit)+" "),i("br"),t._v(" "+t._s(t.monthlyLimit)+" ")])]},proxy:!0}])})],1),i("div",{staticClass:"d-flex align-start"},[i("mew-input",{staticClass:"no-right-border",attrs:{"is-read-only":"",value:t.loading?"Loading...":t.cryptoToFiat+" "+t.selectedCryptoName+" â‰ˆ "+t.plusFeeF+" ","hide-clear-btn":""}}),i("div",{staticClass:"d-flex align-center token-select-button",on:{click:function(e){t.openTokenSelect=!0}}},[i("mew-token-container",{attrs:{img:t.selectedCurrency.img,size:"28px"}}),i("div",{staticClass:"basic--text",staticStyle:{"margin-left":"8px"}},[t._v(" "+t._s(t.selectedCurrency.name)+" ")]),i("v-icon",{staticClass:"ml-auto",attrs:{size:"20px",color:"titlePrimary"}},[t._v(" mdi-chevron-down ")])],1)],1)]),t.inWallet?t._e():i("div",{staticClass:"mt-2"},[i("div",{staticClass:"font-weight-medium textDark--text mb-2"},[t._v(" Where should we send your crypto? ")]),i("module-address-book",{ref:"addressInput",attrs:{label:"Enter Crypto Address",currency:t.selectedCryptoName,"enable-save-address":!1,"is-home-page":!0},on:{setAddress:t.setAddress}})],1),i("mew-button",{staticClass:"mt-2",attrs:{"btn-size":"xlarge","has-full-width":"",disabled:t.disableBuy,title:t.buyBtnTitle,"is-valid-address-func":t.isValidToAddress},nativeOn:{click:function(e){return t.buy.apply(null,arguments)}}}),i("buy-sell-token-select",{attrs:{open:t.openTokenSelect,"currency-items":t.currencyItems,"selected-currency":t.selectedCurrency,"set-currency":t.setCurrency,"in-wallet":t.inWallet},on:{close:function(e){t.openTokenSelect=!1}}})],1)},s=[],r=i("c7eb"),a=i("1da1"),c=i("2909"),o=i("b85c"),u=i("5530"),l=(i("99af"),i("d3b7"),i("25f0"),i("7db0"),i("b0c0"),i("b680"),i("14d9"),i("d81d"),i("4de4"),i("ac1f"),i("5319"),i("caad"),i("2532"),i("1b74")),d=i.n(l),h=i("2ef0"),m=i("2f62"),f=i("901e"),y=i.n(f),p=i("99e5"),b=i.n(p),v=i("5ba3"),C=i("9b88"),x=i("fbdf"),g=i("ac8e"),F=i("e745"),w=i("02c9"),k=i("08e1"),T=i("4b90"),O=i("225b"),S={name:"ModuleBuyEth",components:{ModuleAddressBook:T["default"],BuySellTokenSelect:O["a"]},props:{orderHandler:{type:Object,default:function(){}},defaultCurrency:{type:Object,default:function(){}},inWallet:{type:Boolean,default:!1},supportedBuy:{type:Boolean,default:!1}},data:function(){return{openTokenSelect:!1,selectedCurrency:this.defaultCurrency,loading:!0,selectedFiat:{name:"USD",value:"USD",img:i("1db4")},fetchedData:{},currencyRates:[],amount:"300",toAddress:"",validToAddress:!1,gasPrice:"0",web3Connections:{},simplexQuote:{},showMoonpay:!0,disableCurrencySelect:!0,localCryptoAmount:"0"}},computed:Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])(Object(u["a"])({},Object(m["c"])("global",["network","getFiatValue"])),Object(m["e"])("wallet",["web3","address"])),Object(m["e"])("external",["currencyRate","coinGeckoTokens"])),Object(m["c"])("external",["contractToToken"])),Object(m["c"])("wallet",["tokensList"])),{},{includesFeeText:function(){return"Includes ".concat(this.percentFee," fee (").concat(Object(g["b"])(this.minFee,this.currencyConfig).value," min)")},networkFeeText:function(){return"".concat(this.selectedCurrency.symbol," network fee (for transfers to your wallet) ~").concat(Object(g["b"])(this.networkFeeToFiat,this.currencyConfig).value)},dailyLimit:function(){var t=this.max.moonpay,e=this.max.simplex,i=Math.max(t.toString(),e.toString());return"Daily limit: ".concat(Object(g["b"])(i.toString(),this.currencyConfig).value)},monthlyLimit:function(){var t=y()(this.fiatMultiplier).times(5e4);return"Monthly limit: ".concat(Object(g["b"])(t.toString(),this.currencyConfig).value)},currencyConfig:function(){var t=this.selectedFiat.value,e=this.currencyRate[t],i=t;return{rate:e,currency:i}},fiatMultiplier:function(){var t=this;if(this.hasData){var e=this.fetchedData[0].conversion_rates.find((function(e){return e.fiat_currency===t.selectedFiatName}));return e?y()(e.exchange_rate):Object(v["toBN"])(1)}return Object(v["toBN"])(1)},selectedFiatName:function(){return this.selectedFiat.name},actualAddress:function(){return this.inWallet?this.address:this.toAddress},actualValidAddress:function(){return!!this.inWallet||this.validToAddress},networkFee:function(){return Object(v["fromWei"])(y()(this.gasPrice).times(21e3).toString())},priceOb:function(){var t=this;return Object(h["isEmpty"])(this.fetchedData)?{crypto_currency:"ETH",fiat_currency:"USD",price:"3379.08322"}:this.fetchedData[0].prices.find((function(e){return e.fiat_currency===t.selectedFiatName}))},networkFeeToFiat:function(){return y()(this.networkFee).times(this.priceOb.price).toString()},minFee:function(){return y()(4.43).times(this.fiatMultiplier).toString()},plusFee:function(){var t=this.isEUR?y()(y()(.7).div(100)).times(this.amount):y()(y()(3.25).div(100)).times(this.amount),e=t.gt(this.minFee)?y()(this.amount).minus(t):y()(this.amount).minus(t).minus(this.minFee);return e.minus(this.networkFeeToFiat).toString()},plusFeeF:function(){return Object(g["b"])(this.plusFee,this.currencyConfig).value},percentFee:function(){return this.isEUR?"0.7%":"3.25%"},selectedCryptoName:function(){var t;return null!==(t=this.selectedCurrency)&&void 0!==t&&t.symbol?this.selectedCurrency.symbol:""},isEUR:function(){return"EUR"===this.selectedFiatName||"GBP"===this.selectedFiatName},disableBuy:function(){return!this.inWallet&&!this.actualValidAddress||this.loading||""!==this.amountErrorMessages||!this.supportedBuy},buyBtnTitle:function(){return"BUY NOW"},amountErrorMessages:function(){return y()(this.amount).isNaN()||y()(this.amount).eq(0)?"Amount required":y()(this.amount).lt(0)?"Amount can't be negative":this.min.gt(this.amount)?"Amount can't be below provider's minimum: ".concat(Object(g["b"])(this.min.toFixed(),this.currencyConfig).value," ").concat(this.selectedFiatName):this.maxVal.lt(this.amount)?"Amount can't be above provider's maximum: ".concat(Object(g["b"])(this.maxVal.toFixed(),this.currencyConfig).value," ").concat(this.selectedFiatName):""},tokens:function(){var t=this;if(this.inWallet)return w["a"].reduce((function(e,i){var n=t.tokensList.find((function(t){if(t.contract.toLowerCase()===i.toLowerCase())return t}));if(n)return e.push(n),e;var s=t.contractToToken(i);return s&&e.push(s),e}),[]);var e,i=new Array,n=Object(o["a"])(w["a"]);try{for(n.s();!(e=n.n()).done;){var s=e.value,r=this.contractToToken(s);r&&i.push(r)}}catch(a){n.e(a)}finally{n.f()}return i},currencyItems:function(){var t=this;if(this.supportedBuy){var e=this.currencyRates.length>0?this.tokens.map((function(e){var i=t.currencyRates.find((function(t){return t.crypto_currency===e.symbol})),n=null===i||void 0===i?void 0:i.quotes.find((function(e){return e.fiat_currency===t.selectedFiatName}));return e.price=Object(g["b"])(n?n.price:"0",t.currencyConfig).value,e.value=e.name,e.name=e.symbol,e})):this.tokens,i=Object(c["a"])(e);return i}},hasData:function(){return!Object(h["isEmpty"])(this.fetchedData)},cryptoToFiat:function(){return this.showMoonpay?this.moonpayCryptoAmount:this.simplexCryptoAmount},moonpayCryptoAmount:function(){return Object(g["c"])(y()(this.plusFee).div(this.priceOb.price).toString()).value},simplexCryptoAmount:function(){return Object(g["c"])(this.simplexQuote.crypto_amount).value},fiatCurrencyItems:function(){var t=this.hasData?this.fetchedData[0].fiat_currencies.filter((function(t){return"RUB"!==t})):["USD"];return Object(F["b"])(t)},max:function(){var t=this;if(this.hasData){var e,i,n=null===(e=this.fetchedData[0])||void 0===e?void 0:e.limits.find((function(e){return e.fiat_currency===t.selectedFiatName})),s=null===(i=this.fetchedData[1])||void 0===i?void 0:i.limits.find((function(e){return e.fiat_currency===t.selectedFiatName}));return{moonpay:n?y()(n.limit.max):y()(12e3),simplex:s?y()(s.limit.max):y()(12e3)}}return{moonpay:y()(12e3),simplex:y()(12e3)}},maxVal:function(){var t=this.max.moonpay,e=this.max.simplex,i=Math.max(t.toString(),e.toString());return y()(i)},min:function(){var t=this;if(this.hasData){var e=this.fetchedData[0].limits.find((function(e){return e.fiat_currency===t.selectedFiatName}));return e?y()(e.limit.min):y()(30)}return y()(30)},hideSimplex:function(){return"USDC"===this.selectedCryptoName||"USDT"===this.selectedCryptoName}}),watch:{selectedCurrency:{handler:function(t,e){var i,n={ETH:"ETH",BNB:"BNB",MATIC:"MATIC"};t&&((null===t||void 0===t||null===(i=t.contract)||void 0===i?void 0:i.toLowerCase())!==k["a"]||n[t.symbol])?(Object(h["isEqual"])(t,e)||this.fetchCurrencyData(),this.$emit("selectedCurrency",this.selectedCurrency)):this.selectedCurrency=e},deep:!0},selectedFiat:{handler:function(t,e){var i=this;if(!Object(h["isEqual"])(t,e)){var n=this.currencyItems.find((function(t){return t.name===i.selectedCryptoName})),s=n.price.substring(1).replace(",","");this.amount=y()(this.localCryptoAmount).multipliedBy(s).toFixed(2),this.localCryptoAmount=y()(this.amount).div(s).toString(),this.$emit("selectedFiat",t)}},deep:!0},network:{handler:function(){this.selectedCurrency={},this.selectedCurrency=this.defaultCurrency},deep:!0},orderHandler:{handler:function(){this.fetchCurrencyData()},deep:!0},amount:{handler:function(t){var e=this.max.simplex.multipliedBy(this.fiatMultiplier);this.checkMoonPayMax(),e.lt(t)||Object(h["isEmpty"])(t)||this.min.gt(t)||isNaN(t)?this.loading=!0:(this.loading=!1,this.getSimplexQuote(),this.localCryptoAmount=y()(this.amount).div(this.priceOb.price).toString())}},validToAddress:{handler:function(t){t&&(this.$emit("toAddress",this.toAddress),this.getSimplexQuote())}},coinGeckoTokens:{handler:function(){this.fetchCurrencyData()}},openTokenSelect:function(){this.$emit("openTokenSelect",this.openTokenSelect)}},mounted:function(){var t;this.inWallet||null===(t=this.$refs.addressInput.$refs)||void 0===t||t.addressSelect.clear(),this.fetchCurrencyData()},methods:{setAddress:function(t,e,i){"RESOLVED"!==i.type||i.value.includes(".")?this.toAddress=t:this.toAddress=i.value,this.validToAddress=e},fetchGasPrice:function(){var t=this;return Object(a["a"])(Object(r["a"])().mark((function e(){var i,n,s,a,c;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={ETH:"ETH",BNB:"BSC",MATIC:"MATIC"},s=n[null===(i=t.selectedCurrency)||void 0===i?void 0:i.symbol]?n[t.selectedCurrency.symbol]:"ETH",a=x["a"][s],t.web3Connections[s]||(c=new b.a(a[0].url),t.web3Connections[s]=c),e.next=6,t.web3Connections[s].eth.getGasPrice();case 6:t.gasPrice=e.sent;case 7:case"end":return e.stop()}}),e)})))()},isLT:function(t,e){return y()(t).lt(e)},isValidToAddress:function(t){return d.a.validate(t,this.selectedCurrency.symbol)},checkMoonPayMax:function(){var t=this.max.moonpay,e=this.isLT(t,this.amount);this.$emit("hideMoonpay",e)},setCurrency:function(t){this.selectedCurrency=t},fetchCurrencyData:function(){var t,e=this;this.loading=!0,this.disableCurrencySelect=!0,this.fetchData={},this.fetchGasPrice(),this.orderHandler.getSupportedFiatToBuy(null===(t=this.selectedCurrency)||void 0===t?void 0:t.symbol).then((function(t){e.orderHandler.getFiatRatesForBuy().then((function(t){e.currencyRates=Object(h["cloneDeep"])(t),e.loading=!1,e.disableCurrencySelect=!1})),e.fetchedData=Object.assign({},t),e.localCryptoAmount=y()(e.amount).div(e.priceOb.price).toString()})).catch((function(t){Object(C["e"])(t,{},C["a"])})),this.getSimplexQuote()},getSimplexQuote:function(){var t=this;this.hideSimplex||!this.actualValidAddress||Object(h["isEmpty"])(this.amount)||this.min.gt(this.amount)||isNaN(this.amount)||this.max.simplex.lt(this.amount)||""!==this.amountErrorMessages||(this.loading=!0,this.disableCurrencySelect=!0,this.simplexQuote={},this.orderHandler.getSimplexQuote(this.selectedCryptoName,this.selectedFiatName,this.amount,this.actualAddress).then((function(e){t.simplexQuote=Object.assign({},e),t.loading=!1,t.disableCurrencySelect=!1,t.$emit("simplexQuote",t.simplexQuote),t.compareQuotes()})).catch((function(t){Object(C["e"])(t,{},C["a"])})))},compareQuotes:function(){var t=this.max.moonpay;this.showMoonpay=!this.isLT(t,this.amount)&&this.isLT(this.simplexQuote.crypto_amount,this.moonpayCryptoAmount)},buy:function(){var t={cryptoToFiat:this.moonpayCryptoAmount,selectedCryptoName:this.selectedCryptoName,plusFeeF:this.plusFeeF,includesFeeText:this.includesFeeText,networkFeeText:this.networkFeeText,dailyLimit:this.dailyLimit,monthlyLimit:this.monthlyLimit,fiatAmount:this.amount};this.checkMoonPayMax(),this.$emit("success",[this.simplexQuote,this.toAddress,t,1,this.selectedCurrency,this.selectedFiat])},preventCharE:function(t){"e"===t.key&&t.preventDefault()}}},j=S,A=(i("c675"),i("42c8"),i("2877")),D=Object(A["a"])(j,n,s,!1,null,"57a58af1",null);e["default"]=D.exports},9720:function(t,e,i){},b56e:function(t,e,i){},c675:function(t,e,i){"use strict";i("9720")}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-22d2e242.23869a07.js.map