(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b432ca66"],{"037d":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pt-10 px-8"},[n("mew-select",{ref:"selectedCurrency",attrs:{label:"Currency",items:e.currencyItems,value:e.selectedCurrency,disabled:e.loading,"is-custom":""},on:{input:e.setCurrency}}),e.inWallet?n("div",{staticClass:"position--relative mt-9"},[n("button-balance",{attrs:{balance:e.selectedBalance,loading:e.fetchingBalance}}),n("mew-input",{attrs:{type:"number",label:"Amount",placeholder:"Enter amount to sell","max-btn-obj":e.maxButton,disabled:e.loading,"error-messages":e.errorMessages,"persistent-hint":e.hasPersistentHint,hint:e.persistentHintMessage},nativeOn:{keydown:function(t){return e.preventCharE(t)}},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1):n("div",{staticClass:"position--relative mt-9"},[n("mew-input",{attrs:{type:"number",label:"Amount",placeholder:"Enter amount to sell",disabled:e.loading,"error-messages":e.errorMessages,"persistent-hint":e.hasPersistentHint,hint:e.persistentHintMessage},nativeOn:{keydown:function(t){return e.preventCharE(t)}},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1),n("div",{staticClass:"pt-8 pb-13"},[e.inWallet?n("div",{staticClass:"d-flex align-center justify-space-between mb-2"},[n("div",{staticClass:"mew-body textDark--text font-weight-bold"},[e._v(" Estimated Network Fee ")]),e.estimatingFees?n("v-skeleton-loader",{attrs:{type:"text",width:"150px"}}):n("div",{staticClass:"mew-body textDark--text"},[e._v(" ~"+e._s(e.txFeeInEth)+" ")])],1):e._e(),n("div",{staticClass:"mew-body textMedium--text"},[e._v(" After submitting your sell order, you will have to send your crypto to Moonpay. Remember to have enough ETH for the Send Network Fee. ")])]),e.inWallet?e._e():n("div",{staticClass:"mt-0"},[n("div",{staticClass:"mew-heading-3 textDark--text mb-5"},[e._v("Refund address")]),n("module-address-book",{ref:"addressInput",attrs:{label:"Enter Crypto Address","enable-save-address":!1,"is-home-page":!0},on:{setAddress:e.setAddress}})],1),n("mew-button",{staticClass:"mb-6",attrs:{title:"SELL WITH MOONPAY","btn-size":"xlarge","has-full-width":"",disabled:e.disableSell,"is-valid-address-func":e.isValidToAddress},nativeOn:{click:function(t){return e.sell.apply(null,arguments)}}})],1)},i=[],s=n("2909"),r=n("b85c"),c=n("5530"),l=(n("d3b7"),n("3ca3"),n("ddb0"),n("7db0"),n("14d9"),n("d81d"),n("b0c0"),n("99af"),n("a434"),n("25f0"),n("b680"),n("ac1f"),n("841c"),n("caad"),n("2532"),n("1b74")),o=n.n(l),d=n("2f62"),u=n("2ef0"),h=n("901e"),m=n.n(h),f=n("5ba3"),v=n("99e5"),b=n.n(v),k=n("217a"),y=n("9b88"),p=n("ab74"),g=n("08e1"),T=n("1c358"),N=n("fbdf"),O=n("ac8e"),A=n("b3e3"),S=n("c36f"),w=n("6b64"),x=n("4b90"),j={name:"ModuleSellEth",components:{ButtonBalance:function(){return n.e("chunk-31b3e5d3").then(n.bind(null,"ad29"))},ModuleAddressBook:x["default"]},mixins:[w["a"]],props:{orderHandler:{type:Object,default:function(){}},close:{type:Function,default:function(){}},inWallet:{type:Boolean,default:!1},defaultCurrency:{type:Object,default:function(){}}},data:function(){return{selectedCurrency:this.defaultCurrency,amount:"0",fetchedData:{},locGasPrice:"0",sendHandler:{},loading:!0,hasPersistentHint:!1,fetchingBalance:!0,gasLimit:21e3,estimatingFees:!0,maxBalance:"0",selectedBalance:"0",toAddress:"",validToAddress:!1}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(d["e"])("wallet",["address","instance"])),Object(d["e"])("global",["gasPriceType"])),Object(d["c"])("wallet",["balanceInETH","tokensList"])),Object(d["c"])("global",["isEthNetwork","network","gasPriceByType"])),Object(d["c"])("external",["contractToToken"])),{},{persistentHintMessage:function(){return this.hasPersistentHint?"Max adjusted to leave sufficient ".concat(this.selectedCurrency.symbol," for network fee"):""},maxButton:function(){return m()(this.selectedBalance).gt(0)?{title:"Max",method:this.setMax,disabled:this.nonMainnetMetamask||m()(this.txFee).gte(this.selectedBalance)}:{}},preselectedCurrencies:function(){var e=this;if(this.inWallet)return S["b"].reduce((function(t,n){var a=e.tokensList.find((function(e){if(e.contract.toLowerCase()===n.toLowerCase())return e}));if(a)return a.price=Object(O["b"])(a?a.price:"0").value,t.push(a),t;var i=e.contractToToken(n);return i&&(i.price=Object(O["b"])(i?i.price:"0").value,t.push(i)),t}),[]);var t,n=new Array,a=Object(r["a"])(S["b"]);try{for(a.s();!(t=a.n()).done;){var i=t.value,s=this.contractToToken(i);s&&(s.price=Object(O["b"])(s?s.price:"0").value,n.push(s))}}catch(c){a.e(c)}finally{a.f()}return n},currencyItems:function(){var e=this.preselectedCurrencies,t=e.map((function(e){return e.value=e.name,e.name=e.symbol,e.img})),n=[{text:"Select Token",imgs:t.splice(0,3),total:"".concat(e.length),divider:!0,selectLabel:!0}].concat(Object(s["a"])(e));return n},name:function(){return"ETH"!==this.selectedCurrency.symbol&&"USDC"!==this.selectedCurrency.symbol&&"USDT"!==this.selectedCurrency.symbol?"ETH":this.selectedCurrency.symbol},disableSell:function(){return!this.amount||""===this.amount||m()(this.amount).eq(0)||this.loading||""!==this.errorMessages||!this.actualValidAddress},min:function(){var e=this;if(!Object(u["isEmpty"])(this.fetchedData)){var t=this.fetchedData.limits.find((function(t){return t.crypto_currency===e.name&&"WEB"===t.type}));if(t)return m()(t.limit.min)}return m()(.015)},max:function(){var e=this;if(!Object(u["isEmpty"])(this.fetchedData)){var t=this.fetchedData.limits.find((function(t){return t.crypto_currency===e.name&&"WEB"===t.type}));if(t)return m()(t.limit.max)}return m()(3)},txFee:function(){return Object(f["fromWei"])(m()(this.locGasPrice).times(this.gasLimit).toString())},txFeeInEth:function(){return"".concat(m()(this.txFee).decimalPlaces(4)," ETH")},errorMessages:function(){var e,t=null!==(e=this.selectedCurrency)&&void 0!==e&&e.symbol?this.name:this.network.type.currencyName,n=m()(this.amount);if(this.nonMainnetMetamask)return"Please switch your network to the Ethereum Mainnet on Metamask.";if(n.isNaN()||n.eq(0))return"Amount required";if(n.lt(0))return"Amount can't be negative.";if(n.gt(0)&&n.lt(this.min))return"The minimum amount to sell is ".concat(this.min.toString()," ").concat(t,".");if(n.gt(0)&&n.gt(this.max))return"The maximum amount to sell is ".concat(this.max.toString()," ").concat(t,".");if(this.inWallet){if(n.gt(this.selectedBalance))return"You do not have enough ".concat(t," to sell.");if(!Object(u["isEmpty"])(this.sendHandler)&&!this.sendHandler.hasEnoughBalance())return"You do not have enough ETH to pay for network fee."}else if(this.actualValidAddress&&this.isValidAmount&&!this.hasEnoughAssets)return"Address provided does not have enough balance to complete the transaction";return this.amount&&!p["a"].helpers.hasValidDecimals(this.amount,this.selectedCurrency.decimals)?"Invalid decimals! Max decimals for selected currency is ".concat(this.selectedCurrency.decimals):""},nonMainnetMetamask:function(){var e;return this.instance&&this.instance.identifier===k["a"].WEB3_WALLET&&"ETH"!==(null===(e=this.network)||void 0===e?void 0:e.type.name)},isValidAmount:function(){var e;return!!this.amount&&(!!Object(u["isNumber"])(null===(e=this.selectedCurrency)||void 0===e?void 0:e.decimals)&&(!m()(this.amount).lt(0)&&p["a"].helpers.hasValidDecimals(this.amount,this.selectedCurrency.decimals)))},getCalculatedAmount:function(){var e=new m.a(this.amount?this.amount:0).times(new m.a(10).pow(this.selectedCurrency.decimals)).toFixed(0);return Object(O["h"])(e)},getAmountBN:function(){if(!this.isValidAmount)return Object(O["h"])(0);var e=Object(A["b"])(this.amount?this.amount:0,this.selectedCurrency.decimals);return Object(O["h"])(e)},hasEnoughAssets:function(){try{var e=Object(A["b"])(this.selectedBalance,this.selectedCurrency.decimals);return Object(O["h"])(e).gte(this.getAmountBN)}catch(t){return Object(y["e"])(t,{},y["a"]),!1}},actualAddress:function(){return this.inWallet?this.address:this.toAddress},actualValidAddress:function(){return!!this.inWallet||this.validToAddress}}),watch:{selectedCurrency:{handler:function(e){this.maxBalance="0",this.hasPersistentHint=!1,this.selectedBalance="0",!Object(u["isEmpty"])(this.sendHandler)&&this.selectedCurrency.hasOwnProperty("name")&&this.sendHandler.setCurrency(e),this.fetchSellInfo()},deep:!0},amount:function(e){this.debouncedSetAmount(e)},gasPriceType:function(e){this.locGasPrice=this.gasPriceByType(e)},locGasPrice:function(e){this.sendHandler.setLocalGasPrice(e)},gasLimit:function(e){this.sendHandler.setGasLimit(e)},orderHandler:{handler:function(){this.sendHandler=new p["a"],this.fetchSellInfo(),this.locGasPrice=this.gasPriceByType(this.gasPriceType)},deep:!0}},mounted:function(){var e=this.$refs.selectedCurrency,t=e.$children[0].$refs.menu;this.$watch((function(){return t.isActive}),(function(t){t||""===e.search&&0!==e.selectItems.length||(e.search="")})),this.inWallet||this.$refs.addressInput.$refs.addressSelect.clear(),this.sendHandler=new p["a"],this.fetchSellInfo(),this.locGasPrice=this.gasPriceByType(this.gasPriceType)},methods:Object(c["a"])(Object(c["a"])({},Object(d["b"])("external",["setCoinGeckoTokens"])),{},{setAddress:function(e,t,n){"RESOLVED"!==n.type||n.value.includes(".")?this.toAddress=e:this.toAddress=n.value,this.validToAddress=t,this.validToAddress&&(this.sendHandler.setFrom(this.toAddress),this.fetchSellInfo())},getEthBalance:function(){var e=this;if(this.actualValidAddress){var t=new b.a(N["a"].ETH[0].url);t.eth.getBalance(this.actualAddress).then((function(t){e.fetchingBalance=!1,e.selectedBalance=Object(f["fromWei"])(t)}))}},getTokenBalance:function(){var e=this;if(this.actualValidAddress){var t=new b.a(N["a"].ETH[0].url),n=new t.eth.Contract(T["a"],this.selectedCurrency.contract);n.methods.balanceOf(this.actualAddress).call().then((function(t){e.fetchingBalance=!1,e.selectedBalance=m()(t).div(m()(10).pow(e.selectedCurrency.decimals)).toString()}))}},debouncedSetAmount:Object(u["debounce"])((function(e){var t=this;if(m()(e).eq(this.maxBalance)||(this.hasPersistentHint=!1),!m()(e).lt(0)&&e&&!Object(u["isEmpty"])(this.sendHandler)&&this.isValidAmount&&this.inWallet){var n,a=m()(e||0).times(m()(10).pow(null!==(n=this.selectedCurrency)&&void 0!==n&&n.decimals?this.selectedCurrency.decimals:18)).toString();this.sendHandler.setValue(a),""===this.errorMessages&&this.hasEnoughAssets&&(this.estimatingFees=!0,this.sendHandler.estimateGas().then((function(e){t.estimatingFees=!1,t.gasLimit=e})).catch((function(e){Object(y["e"])(e,{},y["a"])})))}}),500),setCurrency:function(e){this.amount="0",this.selectedCurrency=e},setMax:function(){var e=this.sendHandler.getEntireBal();this.amount=e?m()(e).div(m()(10).pow(this.selectedCurrency.hasOwnProperty("name")?this.selectedCurrency.decimals:18)).toString():this.selectedBalance,this.maxBalance=this.amount,this.hasPersistentHint=!0},sell:function(){var e=this;this.orderHandler.sell(this.name,this.amount,this.actualAddress).then((function(){e.amount="0",e.close(),e.selectedCurrency=e.defaultCurrency})).catch((function(t){Object(y["e"])(t,{},y["a"]),e.amount="0",e.close(),e.selectedCurrency=e.defaultCurrency}))},fetchSellInfo:function(){var e=this;this.actualValidAddress&&this.selectedCurrency.contract?(this.fetchingBalance=!0,this.selectedCurrency.contract===g["a"]?this.getEthBalance():this.getTokenBalance(),this.hasEnoughAssets&&(this.sendHandler.setFrom(this.actualAddress),this.sendHandler.setCurrency(this.selectedCurrency),this.sendHandler.setValue(this.getCalculatedAmount),this.sendHandler.setTo("0xDECAF9CD2367cdbb726E904cD6397eDFcAe6068D","TYPED"),this.estimatingFees=!0,this.sendHandler.estimateGas().then((function(t){e.estimatingFees=!1,e.gasLimit=t})).catch((function(e){Object(y["e"])(e,{},y["a"])})))):(this.fetchingBalance=!1,this.selectedBalance=Object(f["fromWei"])("0")),this.orderHandler.getSupportedFiatToSell(this.name).then((function(t){e.loading=!1,e.fetchedData=t[0]})).catch((function(t){e.loading=!1,Object(y["e"])(t,{},y["a"])}))},isValidToAddress:function(e){return o.a.validate(e,this.selectedCurrency.symbol)},preventCharE:function(e){"e"===e.key&&e.preventDefault()}})},E=j,C=n("2877"),D=Object(C["a"])(E,a,i,!1,null,"10c0e139",null);t["default"]=D.exports},6379:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getEthBalance"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hash"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getEthBalance"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"hash"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getLatestPrices"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getLatestPrices"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"symbol"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contract"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"current_price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"market_cap"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_volume"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price_change_percentage_24h"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_supply"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getBalanceHistory"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"timeString"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"todaysDate"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"key"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"scale"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"TimeseriesScale"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"_nextKey"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getTimeseriesData"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fromT"},value:{kind:"Variable",name:{kind:"Name",value:"timeString"}}},{kind:"Argument",name:{kind:"Name",value:"toT"},value:{kind:"Variable",name:{kind:"Name",value:"todaysDate"}}},{kind:"Argument",name:{kind:"Name",value:"key"},value:{kind:"Variable",name:{kind:"Name",value:"key"}}},{kind:"Argument",name:{kind:"Name",value:"scale"},value:{kind:"Variable",name:{kind:"Name",value:"scale"}}},{kind:"Argument",name:{kind:"Name",value:"nextKey"},value:{kind:"Variable",name:{kind:"Name",value:"_nextKey"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timestamp"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"nextKey"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"subscription",name:{kind:"Name",value:"subscribeToAccountBalance"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"event"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddressEventType"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addressEvent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"event"},value:{kind:"Variable",name:{kind:"Name",value:"event"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"blockNumber"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:791}};n.loc.source={body:"query getEthBalance($hash: String!) {\n  getEthBalance(owner: $hash) {\n    balance\n  }\n}\n\nquery getLatestPrices {\n  getLatestPrices {\n      id\n      symbol\n      name\n      image\n      contract\n      current_price\n      market_cap\n      total_volume\n      price_change_percentage_24h\n      total_supply\n  }\n}\n\nquery getBalanceHistory(\n  $timeString: Int!\n  $todaysDate: Int!\n  $key: String!\n  $scale: TimeseriesScale!\n  $_nextKey: String\n) {\n  getTimeseriesData(\n    fromT: $timeString\n    toT: $todaysDate\n    key: $key\n    scale: $scale\n    nextKey: $_nextKey\n  ) {\n    items {\n      value\n      timestamp\n    }\n    nextKey\n  }\n}\n\nsubscription subscribeToAccountBalance(\n  $owner: String!\n  $event: AddressEventType!\n) {\n  addressEvent(owner: $owner, event: $event) {\n    blockNumber\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function a(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){a(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){a(e,t)})),e.definitions&&e.definitions.forEach((function(e){a(e,t)}))}var i={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var a=e.definitions[n];if(a.name&&a.name.value==t)return a}}function r(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,r=new Set,c=new Set;a.forEach((function(e){c.add(e)}));while(c.size>0){var l=c;c=new Set,l.forEach((function(e){if(!r.has(e)){r.add(e);var t=i[e]||new Set;t.forEach((function(e){c.add(e)}))}}))}return r.forEach((function(t){var a=s(e,t);a&&n.definitions.push(a)})),n}(function(){n.definitions.forEach((function(e){if(e.name){var t=new Set;a(e,t),i[e.name.value]=t}}))})(),e.exports=n,e.exports["getEthBalance"]=r(n,"getEthBalance"),e.exports["getLatestPrices"]=r(n,"getLatestPrices"),e.exports["getBalanceHistory"]=r(n,"getBalanceHistory"),e.exports["subscribeToAccountBalance"]=r(n,"subscribeToAccountBalance")},"6b64":function(e,t,n){"use strict";var a=n("5530"),i=(n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("159b"),n("2f62")),s=n("6379"),r=n("9b88");t["a"]={name:"HandlerWallet",data:function(){return{getLatestPrices:"",tokensData:{}}},apollo:{getLatestPrices:{query:s["getLatestPrices"],pollInterval:6e5,result:function(e){var t=this,n=e.data;this.tokensData=new Map,n&&n.getLatestPrices&&(n.getLatestPrices.forEach((function(e){t.tokensData.set(e.id,e)})),this.setCoinGeckoTokens(this.tokensData))},error:function(e){Object(r["e"])(e.message,{},r["a"])}}},methods:Object(a["a"])({},Object(i["b"])("external",["setCoinGeckoTokens"]))}},ab74:function(e,t,n){"use strict";var a=n("c7eb"),i=n("1da1"),s=n("d4ec"),r=n("bee2"),c=(n("b680"),n("4c53"),n("bf19"),n("5ba3")),l=n("d6fd"),o=n("7466"),d=n("ced0"),u=n("2f62"),h=n("27ca"),m={INVALID_TO_ADDRESS:"Invalid to address",INVALID_FROM_ADDRESS:"Invalid from address",INVALID_DATA_HEX:"Invalid hex string for data",NEGATIVE_VALUE:"negative value"},f=n("6e11"),v=n.n(f),b=n("08e1"),k=n("6013"),y=n("2ef0"),p=n("901e"),g=n.n(p),T=n("ac8e"),N=function(){function e(){Object(s["a"])(this,e),this.$store=h["a"],Object.assign(this,Object(u["e"])("wallet",["balance","web3","address"])),Object.assign(this,Object(u["c"])("global",["network"])),this.currency=null,this.localGasPrice="0",this.TX={from:"0x",to:"0x",destination:"0x",nonce:"0x",gasPrice:"0x",gas:"0x5208",value:"0x",destinationValue:"0x",data:"0x"}}return Object(r["a"])(e,[{key:"setTo",value:function(e,t){if(!Object(l["a"])(e))throw m.INVALID_TO_ADDRESS;this.TX.destination=e,this.TX.toDetails=t}},{key:"_setTo",value:function(){this.TX.to=this.isToken()?Object(c["toChecksumAddress"])(this.currency.contract):Object(c["toChecksumAddress"])(this.TX.destination)}},{key:"setFrom",value:function(e){if(!Object(l["a"])(e))throw m.INVALID_FROM_ADDRESS;this.TX.from=e}},{key:"_setGasPrice",value:function(){this.TX.gasPrice=Object(c["toHex"])(Object(c["toBN"])(this.localGasPrice))}},{key:"setGasLimit",value:function(e){this.TX.gas=Object(c["toHex"])(Object(c["toBN"])(e))}},{key:"setLocalGasPrice",value:function(e){this.localGasPrice=Object(c["toHex"])(Object(c["toBN"])(e))}},{key:"setValue",value:function(e){(isNaN(e)||Object(y["isNull"])(e))&&(e=0);var t=new g.a(e);if(t.lt(0))throw m.NEGATIVE_VALUE;this.TX.destinationValue=Object(c["toHex"])(t.toFixed())}},{key:"_setValue",value:function(){this.isToken()?(this.TX.value="0x00",this.setData(this.getTokenTransferABI(this.TX.destinationValue,this.TX.destination))):this.TX.value=Object(c["toHex"])(Object(c["toBN"])(this.TX.destinationValue))}},{key:"setData",value:function(e){if(!Object(c["isHexStrict"])(e))throw m.INVALID_DATA_HEX;this.TX.data=Object(o["a"])(e)}},{key:"setNonce",value:function(e){this.TX.nonce=Object(c["toHex"])(Object(c["toBN"])(e))}},{key:"setCurrency",value:function(e){this.currency=e,this.TX.data="0x"}},{key:"getEntireBal",value:function(){if(this.isToken())return this.currency.balance;var e=Object(c["toBN"])(this.localGasPrice),t=e.mul(Object(c["toBN"])(this.TX.gas));return this.balance().gt(this.balance().sub(t))?this.balance().sub(t):0}},{key:"txFee",value:function(){return Object(c["toBN"])(this.localGasPrice).mul(Object(c["toBN"])(this.TX.gas))}},{key:"estimateGas",value:function(){return this.address()&&this.setFrom(this.address()),this._setTo(),this._setValue(),this._setGasPrice(),this.web3().eth.estimateGas({data:this.TX.data,from:this.TX.from,to:this.TX.to,value:this.TX.value})}},{key:"isToken",value:function(){var e;return(null===(e=this.currency)||void 0===e?void 0:e.contract)!==b["a"]}},{key:"hasEnoughBalance",value:function(){var e=Object(c["toBN"])(this.TX.destinationValue);if(this.isToken()&&this.currency.balance){var t=e.lte(Object(T["h"])(this.currency.balance)),n=this.txFee().lte(this.balance());return t&&n}return e.add(this.txFee()).lte(this.balance())}},{key:"getTokenTransferABI",value:function(e,t){e=Object(c["toBN"])(e);var n=[{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],a=new v.a(n);return a.methods.transfer(t.toLowerCase(),e).encodeABI()}},{key:"submitTransaction",value:function(){var e=Object(i["a"])(Object(a["a"])().mark((function e(){var t,n,i;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this._setTo(),this._setValue(),this._setGasPrice(),e.next=6,this.web3().eth.getTransactionCount(this.address());case 6:return t=e.sent,this.setNonce(t),this.TX.gasLimit=this.TX.gas,n=d["Transaction"].fromTxData(this.TX),i=n.toJSON(!0),i.from=this.address(),i.toDetails=this.TX.toDetails,e.abrupt("return",this.web3().eth.sendTransaction(i));case 16:return e.prev=16,e.t0=e["catch"](0),e.abrupt("return",e.t0);case 19:case"end":return e.stop()}}),e,this,[[0,16]])})));function t(){return e.apply(this,arguments)}return t}()}]),e}();N.helpers={hasValidDecimals:k["a"]};t["a"]=N},bf19:function(e,t,n){"use strict";var a=n("23e7"),i=n("c65b");a({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return i(URL.prototype.toString,this)}})}}]);
//# sourceMappingURL=../sourcemaps/js/chunk-b432ca66.09d5bb98.js.map