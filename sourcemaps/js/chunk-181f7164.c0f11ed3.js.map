{"version":3,"sources":["webpack:///./src/core/helpers/validateHexString.js","webpack:///./src/modules/contract/ModuleContractInteract.vue?bf22","webpack:///src/modules/contract/ModuleContractInteract.vue","webpack:///./src/modules/contract/ModuleContractInteract.vue?2ead","webpack:///./src/modules/contract/ModuleContractInteract.vue","webpack:///./src/core/helpers/addressUtils.js","webpack:///./src/modules/contract/handlers/solidityTypes.js","webpack:///./src/modules/contract/handlers/common.js"],"names":["validateHexString","str","isHexStrict","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","scopedSlots","_u","key","fn","mergedContracts","on","selectedContract","nametag","length","model","value","callback","$$v","contractAddress","expression","abi","nativeOn","$event","resetDefaults","apply","arguments","canInteract","showInteract","text","linkTitle","link","interact","closeInteract","methods","methodSelect","directives","name","rawName","selectedMethod","inputs","_v","_l","input","idx","getType","type","isValidInput","solidityType","valueInput","_e","$set","hasEnough","payableInput","isViewFunction","canProceed","readWrite","output","_s","proxy","staticRenderFns","data","currentContract","inputsValid","outputs","outputValues","ethPayable","networkContracts","computed","mapState","mapGetters","isPayableFunction","canPay","arr","selectLabel","divider","concat","checkContract","item","hasOutputs","watch","newVal","web3","handler","mounted","generateNetworkContracts","params","caller","call","then","Vue","out","catch","Toast","to","from","estimateGas","rawTx","send","amount","_input","selected","JSON","evt","sType","component","isAddress","address","utils","toChecksumAddress","uint","int","string","bytes","bool","isContractArgValid","includes","parsedValue","Array","isArray","stringToArray","replace","parsedItem","isNaN","isInt","hasWhiteSpace","substr","e","inputType","parseABI","json","parse","parseJSON","test"],"mappings":"kHAAA,gBAEMA,EAAoB,SAAAC,GACxB,MAAY,KAARA,GACGC,yBAAYD,IAGND,U,2CCPf,IAAIG,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,aAAa,CAACE,YAAY,0BAA0BC,MAAM,CAAC,MAAQ,yBAAyB,iBAAgB,EAAK,iBAAgB,GAAMC,YAAYR,EAAIS,GAAG,CAAC,CAACC,IAAI,aAAaC,GAAG,WAAW,MAAO,CAACP,EAAG,MAAM,CAACA,EAAG,aAAa,CAACG,MAAM,CAAC,MAAQP,EAAIY,gBAAgB,MAAQ,gBAAgB,kBAAkB,IAAIC,GAAG,CAAC,MAAQb,EAAIc,oBAAoBV,EAAG,YAAY,CAACE,YAAY,mBAAmBC,MAAM,CAAC,MAAQ,mBAAmB,YAAc,IAAI,kBAAkBP,EAAIe,QAAQC,OAAS,EAAE,KAAOhB,EAAIe,SAASE,MAAM,CAACC,MAAOlB,EAAmB,gBAAEmB,SAAS,SAAUC,GAAMpB,EAAIqB,gBAAgBD,GAAKE,WAAW,qBAAqBlB,EAAG,aAAa,CAACG,MAAM,CAAC,YAAY,GAAG,SAAW,GAAG,KAAO,YAAY,MAAQ,sBAAsBU,MAAM,CAACC,MAAOlB,EAAO,IAAEmB,SAAS,SAAUC,GAAMpB,EAAIuB,IAAIH,GAAKE,WAAW,SAASlB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,aAAa,CAACE,YAAY,OAAOC,MAAM,CAAC,MAAQ,YAAY,kBAAiB,EAAM,YAAY,SAASiB,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAI0B,cAAcC,MAAM,KAAMC,eAAexB,EAAG,aAAa,CAACG,MAAM,CAAC,MAAQ,WAAW,UAAYP,EAAI6B,YAAY,kBAAiB,GAAOL,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAI8B,aAAaH,MAAM,KAAMC,gBAAgB,IAAI,GAAGxB,EAAG,cAAc,CAACG,MAAM,CAAC,OAAS,CACh0CwB,KAAM,aACNC,UAAW,kBACXC,KAAM,oCACN,MAAQ,yBAAyB,eAAejC,EAAIkC,SAAS,MAAQlC,EAAImC,cAAc,eAAe,WAAW,CAAC/B,EAAG,aAAa,CAACE,YAAY,OAAOC,MAAM,CAAC,MAAQ,WAAW,MAAQP,EAAIoC,QAAQ,kBAAkB,IAAIvB,GAAG,CAAC,MAAQb,EAAIqC,gBAAgBjC,EAAG,MAAM,CAACkC,WAAW,CAAC,CAACC,KAAK,OAAOC,QAAQ,SAAStB,MAAOlB,EAAIyC,eAAeC,OAAa,OAAEpB,WAAW,iCAAiChB,YAAY,sBAAsB,CAACN,EAAI2C,GAAG,cAAc3C,EAAI4C,GAAI5C,EAAIyC,eAAqB,QAAE,SAASI,EAAMC,GAAK,OAAO1C,EAAG,MAAM,CAACM,IAAImC,EAAMN,KAAOO,EAAIxC,YAAY,wBAAwB,CAAmC,UAAjCN,EAAI+C,QAAQF,EAAMG,MAAMA,KAAkB5C,EAAG,YAAY,CAACG,MAAM,CAAC,MAAUsC,EAAU,KAAI,KAAQA,EAAU,KAAI,IAAK,MAAQ,CACtrB,SAAU3B,GACR,OAAOlB,EAAIiD,aAAa/B,EAAOlB,EAAI+C,QAAQF,EAAMG,MAAME,iBAExDrC,GAAG,CAAC,MAAQ,SAASY,GAAQ,OAAOzB,EAAImD,WAAWL,EAAKrB,OAAYzB,EAAIoD,KAAuC,UAAjCpD,EAAI+C,QAAQF,EAAMG,MAAMA,KAAkB5C,EAAG,MAAM,CAACE,YAAY,wBAAwB,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQsC,EAAMN,KAAK,KAAO,QAAQ,QAAU,IAAI1B,GAAG,CAAC,MAAQ,SAASY,GAAQ,OAAOzB,EAAImD,WAAWL,EAAKrB,KAAUR,MAAM,CAACC,MAAO2B,EAAW,MAAE1B,SAAS,SAAUC,GAAMpB,EAAIqD,KAAKR,EAAO,QAASzB,IAAME,WAAW,kBAAkB,KAAKtB,EAAIoD,MAAM,MAAKhD,EAAG,MAAM,CAAEJ,EAAqB,kBAAEI,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQ,cAAc,MAAQ,CACpjB,SAAUW,GACR,OAAOlB,EAAIsD,UAAY,GAAK,mBAE9B,KAAO,UAAUzC,GAAG,CAAC,MAAQ,SAASY,GAAQ,OAAOzB,EAAIuD,aAAa9B,OAAYzB,EAAIoD,MAAM,GAAGhD,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,aAAa,CAACG,MAAM,CAAC,MAAQP,EAAIwD,eAAiB,OAAS,QAAQ,kBAAiB,EAAM,WAAW,SAAS,SAAWxD,EAAIyD,YAAYjC,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOzB,EAAI0D,UAAU/B,MAAM,KAAMC,gBAAgB,GAAI5B,EAAc,WAAEI,EAAG,YAAY,CAACE,YAAY,cAAcN,EAAIoD,KAAMpD,EAAc,WAAEI,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACN,EAAI2C,GAAG,aAAa3C,EAAI4C,GAAI5C,EAAIyC,eAAsB,SAAE,SAASkB,EAAOb,GAAK,OAAO1C,EAAG,MAAM,CAACM,IAAIiD,EAAOpB,KAAOO,EAAIxC,YAAY,kDAAkD,CAACF,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACN,EAAI2C,GAAG,IAAI3C,EAAI4D,GAAmB,KAAhBD,EAAOpB,KAAcoB,EAAOpB,KAAOvC,EAAIyC,eAAeF,MAAM,OAAOnC,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAACN,EAAI2C,GAAG3C,EAAI4D,GAAGD,EAAOzC,gBAAe,GAAGlB,EAAIoD,MAAM,KAAKS,OAAM,QACv5BC,EAAkB,G,0MCuJP,GACfvB,8BACAwB,KAFA,WAGA,OACAC,qBACA9B,YACA+B,eACAX,aACA/B,OACAF,mBACAoB,gBACAC,UACAwB,YAEAC,gBACAC,eACArD,WACAsD,sBAGAC,yDACAC,uDACAC,kEAFA,IAGAf,WAHA,WAIA,+BACA,cAIA,oBACA,mCACA,aAGA,uDAEAD,eAhBA,WAiBA,OACA,8BACA,8CAGAiB,kBAtBA,WAuBA,uDAEAC,OAzBA,WA0BA,+BACA,gBAIA9D,gBA/BA,WAgCA,yBACA+D,sBAAA,yCACA,OACA,CAAA5C,yBAAA6C,eAAAC,aACAC,OACAC,uBACAA,2BAGA3C,QAzCA,WA0CA,wBACA,yCACA,GACA4C,wBACAA,kBACAA,oBAEA,YAIA,IAEAnD,YAvDA,WAwDA,uFAEAoD,WA1DA,WA2DA,sDACA,gBACA,YAIA,qBAGAC,OACA7D,gBADA,SACA8D,GACA,gBACA,IACA,0BAIAC,MACAC,mBACA,mCAIAC,QAtGA,WAuGA,iCAEAlD,SACAmD,yBADA,WACA,WACA,8CACA,yBAGA7D,cANA,WAOA,0BACA,YACA,wBACA,iBACA,qBACAgB,UACAwB,aAGAR,UAhBA,WAgBA,IAAI,EAAJ,OACA,KADA,iBAEA,4BAFA,IAEA,0CACA,sBACA8B,gCACAA,iBALA,8BAOA,mCACA,0BACA7D,MAAA,KAAA6D,GACA,uBACAC,EACAC,OACAC,MAAA,YACA,qCACA,oCACAC,iBACA,yBACA,EACA,8BAEA,mCACA,gDACAC,aACAD,qDAIAE,OAAA,4BACAC,oCAEA,2BACA,OACAC,wBACAC,kBACA/E,sBACA6C,oBAGA,cACAmC,YAAAC,GACAR,MAAA,YACAQ,QACAV,aAEAK,OAAA,4BACAC,oCAGAN,EACAW,KAAA,CAAAH,oBACAH,OAAA,mEAGAvC,aAtEA,SAsEA8C,GACA,mBACA,8CACA,qEAEAlD,WA3EA,SA2EAL,EAAA5B,GACA,sCACA,oBAFA,IAAI,EAAJ,iBAGA,4BAHA,IAGA,0CAEA,kBACAoF,QACA,qCAGA,sBAVA,gCAaAxF,iBAxFA,SAwFAyF,GACA,wCACA,wBACA,+BACA,gBAEA,4BACA,iCAGApE,cAlGA,WAmGA,iBACA,sBAEAL,aAtGA,WAuGA,iBACA,gDACA0E,qBACA,uBAGAnE,aA7GA,SA6GAoE,GACA,yBACA,oBACA,sBACA,qEACA,sEACA,uBAIAxD,aAvHA,SAuHA/B,EAAAwF,GACA,4BAEA3D,QA1HA,SA0HAC,GACA,4BCxY+W,I,YCO3W2D,EAAY,eACd,EACA5G,EACA+D,GACA,EACA,KACA,KACA,MAIa,aAAA6C,E,2CClBf,6FAEMC,EAAY,SAAAC,GAChB,OACEA,GAAWzB,IAAK0B,MAAMhH,YAAY+G,IAAYzB,IAAK0B,MAAMF,UAAUC,IAGjEE,EAAoB,SAAAF,GACxB,OAAOzB,IAAK0B,MAAMC,kBAAkBF,K,sQCRhCG,EAAO,OACPC,EAAM,MACNJ,EAAU,UACVK,EAAS,SACTC,EAAQ,QACRC,EAAO,O,wBCOPC,EAAqB,SAArBA,EAAsBnG,EAAOgC,GACjC,IAEE,GADKhC,GAA0B,mBAAVA,IAAqBA,EAAQ,IAC9CgC,EAAaoE,SAAS,MAAO,CAC/B,IAD+B,EACzBC,EAAcC,MAAMC,QAAQvG,GAASA,EAAQwG,eAAcxG,GAC3D8B,EAAOE,EAAayE,QAAQ,KAAM,IAFT,iBAGNJ,GAHM,IAG/B,IAAK,EAAL,qBAAsC,KAA3BK,EAA2B,QACpC,IAAKP,EAAmBO,EAAY5E,GAAO,OAAO,GAJrB,8BAM/B,OAAO,EAET,OAAIE,EAAaoE,SAASN,IAAS9D,EAAaoE,SAASL,GAE3C,KAAV/F,IAAiB2G,MAAM3G,IAAU4G,eAAM5G,KAAW6G,EAAc7G,GAEzDgC,IAAiB2D,EAAgBD,eAAU1F,GAC7CgC,IAAiBgE,IACjBhE,EAAaoE,SAASH,GACC,OAAvBjG,EAAM8G,OAAO,EAAG,IAAepI,eAAkBsB,GACjDgC,IAAiBkE,IACjB,eAAOlG,KAAP,gBAAwB,IAAQ,eAAOA,KAAP,gBAAwB,KAEjE,MAAO+G,GACP,OAAO,IAGLlF,EAAU,SAAAmF,GAEd,OADKA,IAAWA,EAAY,IACxBA,EAAUZ,SAAS,MACd,CAAEtE,KAAM,SAAUE,aAAc,GAAF,OAAKgF,IAExCA,EAAUZ,SAASN,IAASkB,EAAUZ,SAASL,GAC1C,CAAEjE,KAAM,SAAUE,aAAc8D,GAChCkB,EAAUZ,SAAST,GACnB,CAAE7D,KAAM,OAAQE,aAAc2D,GAC9BqB,EAAUZ,SAASJ,GACnB,CAAElE,KAAM,OAAQE,aAAcgE,GAC9BgB,EAAUZ,SAASH,GACnB,CAAEnE,KAAM,OAAQE,aAAciE,GAC9Be,EAAUZ,SAASF,GACnB,CAAEpE,KAAM,QAASE,aAAckE,GACjC,CAAEpE,KAAM,OAAQE,aAAcgE,IAEjCiB,EAAW,SAAAC,GACf,GAAa,KAATA,EAAa,OAAO,EACxB,IACE,IAAMlH,EAAQsF,KAAK6B,MAAMD,GACzB,SAAIZ,MAAMC,QAAQvG,IACZA,EAAMF,OAAS,IACVE,EAIX,MAAO+G,GACP,SAAIT,MAAMC,QAAQW,IACZA,EAAKpH,OAAS,IACToH,IAOTE,EAAY,SAAAF,GAChB,IACE,OAAO5B,KAAK6B,MAAMD,GAClB,MAAOH,GACP,QAAIT,MAAMC,QAAQW,IACTA,IAMPL,EAAgB,SAAAb,GACpB,MAAO,MAAMqB,KAAKrB","file":"js/chunk-181f7164.c0f11ed3.js","sourcesContent":["import { isHexStrict } from 'web3-utils';\n\nconst validateHexString = str => {\n  if (str === '') return true;\n  return isHexStrict(str);\n};\n\nexport default validateHexString;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('mew-module',{staticClass:\"d-flex flex-grow-1 pt-6\",attrs:{\"title\":\"Interact with contract\",\"has-elevation\":true,\"has-indicator\":true},scopedSlots:_vm._u([{key:\"moduleBody\",fn:function(){return [_c('div',[_c('mew-select',{attrs:{\"items\":_vm.mergedContracts,\"label\":\"Contract Name\",\"normal-dropdown\":\"\"},on:{\"input\":_vm.selectedContract}}),_c('mew-input',{staticClass:\"mr-3 flex-grow-1\",attrs:{\"label\":\"Contract Address\",\"placeholder\":\" \",\"persistent-hint\":_vm.nametag.length > 0,\"hint\":_vm.nametag},model:{value:(_vm.contractAddress),callback:function ($$v) {_vm.contractAddress=$$v},expression:\"contractAddress\"}}),_c('v-textarea',{attrs:{\"no-resize\":\"\",\"outlined\":\"\",\"name\":\"input-7-4\",\"label\":\"ABI/JSON Interface\"},model:{value:(_vm.abi),callback:function ($$v) {_vm.abi=$$v},expression:\"abi\"}}),_c('div',{staticClass:\"text-right\"},[_c('mew-button',{staticClass:\"mr-4\",attrs:{\"title\":\"Clear all\",\"has-full-width\":false,\"btn-style\":\"light\"},nativeOn:{\"click\":function($event){return _vm.resetDefaults.apply(null, arguments)}}}),_c('mew-button',{attrs:{\"title\":\"Interact\",\"disabled\":!_vm.canInteract,\"has-full-width\":false},nativeOn:{\"click\":function($event){return _vm.showInteract.apply(null, arguments)}}})],1)],1),_c('mew-overlay',{attrs:{\"footer\":{\n        text: 'Need help?',\n        linkTitle: 'Contact support',\n        link: 'mailto:support@myetherwallet.com'\n      },\"title\":\"Interact with contract\",\"show-overlay\":_vm.interact,\"close\":_vm.closeInteract,\"content-size\":\"medium\"}},[_c('mew-select',{staticClass:\"mb-1\",attrs:{\"label\":\"Function\",\"items\":_vm.methods,\"normal-dropdown\":\"\"},on:{\"input\":_vm.methodSelect}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.selectedMethod.inputs.length),expression:\"selectedMethod.inputs.length\"}],staticClass:\"mew-heading-2 mb-3\"},[_vm._v(\" Inputs \")]),_vm._l((_vm.selectedMethod.inputs),function(input,idx){return _c('div',{key:input.name + idx,staticClass:\"input-item-container\"},[(_vm.getType(input.type).type !== 'radio')?_c('mew-input',{attrs:{\"label\":((input.name) + \" (\" + (input.type) + \")\"),\"rules\":[\n            function (value) {\n              return _vm.isValidInput(value, _vm.getType(input.type).solidityType);\n            }\n          ]},on:{\"input\":function($event){return _vm.valueInput(idx, $event)}}}):_vm._e(),(_vm.getType(input.type).type === 'radio')?_c('div',{staticClass:\"bool-input-container\"},[_c('div',{staticClass:\"bool-items\"},[_c('mew-checkbox',{attrs:{\"label\":input.name,\"type\":\"radio\",\"checked\":\"\"},on:{\"input\":function($event){return _vm.valueInput(idx, $event)}},model:{value:(input.value),callback:function ($$v) {_vm.$set(input, \"value\", $$v)},expression:\"input.value\"}})],1)]):_vm._e()],1)}),_c('div',[(_vm.isPayableFunction)?_c('mew-input',{attrs:{\"label\":\"ETH amount:\",\"rules\":[\n            function (value) {\n              return _vm.hasEnough ? '' : 'Not enough ETH';\n            }\n          ],\"type\":\"number\"},on:{\"input\":function($event){return _vm.payableInput($event)}}}):_vm._e()],1),_c('div',{staticClass:\"text-center mt-2\"},[_c('mew-button',{attrs:{\"title\":_vm.isViewFunction ? 'Call' : 'Write',\"has-full-width\":false,\"btn-size\":\"xlarge\",\"disabled\":_vm.canProceed},nativeOn:{\"click\":function($event){return _vm.readWrite.apply(null, arguments)}}})],1),(_vm.hasOutputs)?_c('v-divider',{staticClass:\"mt-9 mb-8\"}):_vm._e(),(_vm.hasOutputs)?_c('div',[_c('div',{staticClass:\"mew-heading-2\"},[_vm._v(\"Results\")]),_vm._l((_vm.selectedMethod.outputs),function(output,idx){return _c('div',{key:output.name + idx,staticClass:\"d-flex align-center justify-space-between my-4\"},[_c('div',{staticClass:\"text-capitalize\"},[_vm._v(\" \"+_vm._s(output.name !== '' ? output.name : _vm.selectedMethod.name)+\" \")]),_c('div',{staticClass:\"font-weight-medium\"},[_vm._v(_vm._s(output.value))])])})],2):_vm._e()],2)]},proxy:true}])})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <mew-module\n    class=\"d-flex flex-grow-1 pt-6\"\n    title=\"Interact with contract\"\n    :has-elevation=\"true\"\n    :has-indicator=\"true\"\n  >\n    <template #moduleBody>\n      <div>\n        <mew-select\n          :items=\"mergedContracts\"\n          label=\"Contract Name\"\n          normal-dropdown\n          @input=\"selectedContract\"\n        />\n        <mew-input\n          v-model=\"contractAddress\"\n          label=\"Contract Address\"\n          placeholder=\" \"\n          class=\"mr-3 flex-grow-1\"\n          :persistent-hint=\"nametag.length > 0\"\n          :hint=\"nametag\"\n        />\n\n        <v-textarea\n          v-model=\"abi\"\n          no-resize\n          outlined\n          name=\"input-7-4\"\n          label=\"ABI/JSON Interface\"\n        ></v-textarea>\n\n        <div class=\"text-right\">\n          <mew-button\n            title=\"Clear all\"\n            :has-full-width=\"false\"\n            btn-style=\"light\"\n            class=\"mr-4\"\n            @click.native=\"resetDefaults\"\n          />\n          <mew-button\n            title=\"Interact\"\n            :disabled=\"!canInteract\"\n            :has-full-width=\"false\"\n            @click.native=\"showInteract\"\n          />\n        </div>\n      </div>\n\n      <!--\n      ============================================================================\n      Overlay\n      ============================================================================\n      -->\n      <mew-overlay\n        :footer=\"{\n          text: 'Need help?',\n          linkTitle: 'Contact support',\n          link: 'mailto:support@myetherwallet.com'\n        }\"\n        title=\"Interact with contract\"\n        :show-overlay=\"interact\"\n        :close=\"closeInteract\"\n        content-size=\"medium\"\n      >\n        <mew-select\n          label=\"Function\"\n          :items=\"methods\"\n          class=\"mb-1\"\n          normal-dropdown\n          @input=\"methodSelect\"\n        />\n\n        <div v-show=\"selectedMethod.inputs.length\" class=\"mew-heading-2 mb-3\">\n          Inputs\n        </div>\n        <div\n          v-for=\"(input, idx) in selectedMethod.inputs\"\n          :key=\"input.name + idx\"\n          class=\"input-item-container\"\n        >\n          <mew-input\n            v-if=\"getType(input.type).type !== 'radio'\"\n            :label=\"`${input.name} (${input.type})`\"\n            :rules=\"[\n              value => {\n                return isValidInput(value, getType(input.type).solidityType);\n              }\n            ]\"\n            @input=\"valueInput(idx, $event)\"\n          />\n          <div\n            v-if=\"getType(input.type).type === 'radio'\"\n            class=\"bool-input-container\"\n          >\n            <div class=\"bool-items\">\n              <mew-checkbox\n                v-model=\"input.value\"\n                :label=\"input.name\"\n                type=\"radio\"\n                checked\n                @input=\"valueInput(idx, $event)\"\n              />\n            </div>\n          </div>\n        </div>\n        <div>\n          <mew-input\n            v-if=\"isPayableFunction\"\n            label=\"ETH amount:\"\n            :rules=\"[\n              value => {\n                return hasEnough ? '' : 'Not enough ETH';\n              }\n            ]\"\n            type=\"number\"\n            @input=\"payableInput($event)\"\n          />\n        </div>\n        <div class=\"text-center mt-2\">\n          <mew-button\n            :title=\"isViewFunction ? 'Call' : 'Write'\"\n            :has-full-width=\"false\"\n            btn-size=\"xlarge\"\n            :disabled=\"canProceed\"\n            @click.native=\"readWrite\"\n          />\n        </div>\n\n        <v-divider v-if=\"hasOutputs\" class=\"mt-9 mb-8\" />\n\n        <div v-if=\"hasOutputs\">\n          <div class=\"mew-heading-2\">Results</div>\n          <div\n            v-for=\"(output, idx) in selectedMethod.outputs\"\n            :key=\"output.name + idx\"\n            class=\"d-flex align-center justify-space-between my-4\"\n          >\n            <div class=\"text-capitalize\">\n              {{ output.name !== '' ? output.name : selectedMethod.name }}\n            </div>\n            <div class=\"font-weight-medium\">{{ output.value }}</div>\n          </div>\n        </div>\n      </mew-overlay>\n    </template>\n  </mew-module>\n</template>\n\n<script>\nimport Vue from 'vue';\nimport { mapState, mapGetters } from 'vuex';\nimport { toBN, toWei } from 'web3-utils';\nimport { isString } from 'lodash';\n\nimport { isAddress } from '@/core/helpers/addressUtils';\nimport { stringToArray } from '@/core/helpers/common';\nimport {\n  parseJSON,\n  parseABI,\n  getType as getInputType,\n  isContractArgValid\n} from './handlers/common';\nimport { ERROR, Toast } from '../toast/handler/handlerToast';\nexport default {\n  name: 'ModuleContractInteract',\n  data() {\n    return {\n      currentContract: null,\n      interact: false,\n      inputsValid: false,\n      hasEnough: false,\n      abi: [],\n      contractAddress: '',\n      selectedMethod: {\n        inputs: [],\n        outputs: []\n      },\n      outputValues: [],\n      ethPayable: '0',\n      nametag: '',\n      networkContracts: []\n    };\n  },\n  computed: {\n    ...mapState('wallet', ['address', 'web3', 'balance']),\n    ...mapGetters('global', ['network', 'gasPrice', 'localContracts']),\n    canProceed() {\n      if (this.isPayableFunction) {\n        if (!this.canPay) {\n          return true;\n        }\n        return (\n          !this.inputsValid &&\n          !!this.selectedMethod.inputs.length &&\n          this.canPay\n        );\n      }\n      return !this.inputsValid && !!this.selectedMethod.inputs.length;\n    },\n    isViewFunction() {\n      return (\n        this.selectedMethod.constant ||\n        this.selectedMethod.stateMutability === 'view'\n      );\n    },\n    isPayableFunction() {\n      return this.selectedMethod.stateMutability === 'payable';\n    },\n    canPay() {\n      if (this.isPayableFunction) {\n        return this.hasEnough;\n      }\n      return true;\n    },\n    mergedContracts() {\n      const checkContract = arr =>\n        arr.filter(contract => isString(contract.name));\n      return [\n        { text: 'Select a Contract', selectLabel: true, divider: true }\n      ].concat(\n        checkContract(this.localContracts),\n        checkContract(this.networkContracts)\n      );\n    },\n    methods() {\n      if (this.canInteract) {\n        return JSON.parse(this.abi).filter(item => {\n          if (\n            item.type !== 'constructor' &&\n            item.type !== 'event' &&\n            item.type !== 'Fallback'\n          ) {\n            return item;\n          }\n        });\n      }\n      return [];\n    },\n    canInteract() {\n      return isAddress(this.contractAddress) && parseABI(parseJSON(this.abi));\n    },\n    hasOutputs() {\n      const outputsWithValues = this.selectedMethod.outputs.filter(item => {\n        if (item.value !== '') {\n          return item;\n        }\n      });\n\n      return outputsWithValues.length > 0;\n    }\n  },\n  watch: {\n    contractAddress(newVal) {\n      this.nametag = '';\n      if (!newVal) {\n        this.contractAddress = '';\n        return;\n      }\n    },\n    web3: {\n      handler: function () {\n        this.generateNetworkContracts();\n      }\n    }\n  },\n  mounted() {\n    this.generateNetworkContracts();\n  },\n  methods: {\n    generateNetworkContracts() {\n      this.network.type.contracts.then(contracts => {\n        this.networkContracts = contracts;\n      });\n    },\n    resetDefaults() {\n      this.currentContract = null;\n      this.abi = [];\n      this.contractAddress = '';\n      this.interact = false;\n      this.selectedMethod = {\n        inputs: [],\n        outputs: []\n      };\n    },\n    readWrite() {\n      const params = [];\n      for (const _input of this.selectedMethod.inputs) {\n        if (_input.type.includes('[]'))\n          params.push(stringToArray(_input.value));\n        else params.push(_input.value);\n      }\n      const caller = this.currentContract.methods[\n        this.selectedMethod.name\n      ].apply(this, params);\n      if (this.isViewFunction) {\n        caller\n          .call()\n          .then(result => {\n            if (this.selectedMethod.outputs.length === 1) {\n              this.selectedMethod.outputs[0].value = result;\n              Vue.set(\n                this.selectedMethod.outputs,\n                0,\n                this.selectedMethod.outputs[0]\n              );\n            } else if (this.selectedMethod.outputs.length > 1) {\n              this.selectedMethod.outputs.forEach((out, idx) => {\n                out.value = result[idx];\n                Vue.set(this.selectedMethod.outputs, idx, out);\n              });\n            }\n          })\n          .catch(({ message }) => {\n            Toast(message, {}, ERROR);\n          });\n      } else if (this.isPayableFunction) {\n        const rawTx = {\n          to: this.contractAddress,\n          from: this.address,\n          value: this.ethPayable,\n          data: caller.encodeABI()\n        };\n\n        this.web3.eth\n          .estimateGas(rawTx)\n          .then(gasLimit => {\n            rawTx.gas = gasLimit;\n            caller.send(rawTx);\n          })\n          .catch(({ message }) => {\n            Toast(message, {}, ERROR);\n          });\n      } else {\n        caller\n          .send({ from: this.address })\n          .catch(({ message }) => Toast(message, {}, ERROR));\n      }\n    },\n    payableInput(amount) {\n      if (!amount || amount === '') amount = '0';\n      this.ethPayable = toWei(amount, 'ether');\n      this.hasEnough = toBN(this.ethPayable).lte(this.balance);\n    },\n    valueInput(idx, value) {\n      this.selectedMethod.inputs[idx].value = value;\n      this.inputsValid = true;\n      for (const _input of this.selectedMethod.inputs) {\n        if (\n          !this.isValidInput(\n            _input.value,\n            this.getType(_input.type).solidityType\n          )\n        )\n          this.inputsValid = false;\n      }\n    },\n    selectedContract(selected) {\n      if (parseABI(parseJSON(selected.abi))) {\n        if (typeof selected.abi !== 'string')\n          this.abi = JSON.stringify(selected.abi);\n        else this.abi = selected.abi;\n      }\n      if (isAddress(selected.address)) {\n        this.contractAddress = selected.address;\n      }\n    },\n    closeInteract() {\n      this.interact = false;\n      this.resetDefaults();\n    },\n    showInteract() {\n      this.interact = true;\n      this.currentContract = new this.web3.eth.Contract(\n        JSON.parse(this.abi),\n        this.contractAddress\n      );\n    },\n    methodSelect(evt) {\n      if (evt && evt.inputs && evt.outputs) {\n        this.inputsValid = false;\n        this.selectedMethod = evt;\n        this.selectedMethod.inputs.forEach(v => (v.value = ''));\n        this.selectedMethod.outputs.forEach(v => (v.value = ''));\n        this.outputValues = [];\n      }\n    },\n\n    isValidInput(value, sType) {\n      return isContractArgValid(value, sType);\n    },\n    getType(type) {\n      return getInputType(type);\n    }\n  }\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModuleContractInteract.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModuleContractInteract.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ModuleContractInteract.vue?vue&type=template&id=5c88155f&\"\nimport script from \"./ModuleContractInteract.vue?vue&type=script&lang=js&\"\nexport * from \"./ModuleContractInteract.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import web3 from 'web3';\n\nconst isAddress = address => {\n  return (\n    address && web3.utils.isHexStrict(address) && web3.utils.isAddress(address)\n  );\n};\nconst toChecksumAddress = address => {\n  return web3.utils.toChecksumAddress(address);\n};\nexport { isAddress, toChecksumAddress };\n","const uint = 'uint';\nconst int = 'int';\nconst address = 'address';\nconst string = 'string';\nconst bytes = 'bytes';\nconst bool = 'bool';\n\nexport { uint, address, string, bytes, bool, int };\n","import { isInt, stringToArray } from '@/core/helpers/common';\nimport {\n  address,\n  bool,\n  bytes,\n  int,\n  string,\n  uint\n} from '@/modules/contract/handlers/solidityTypes';\nimport { isAddress } from '@/core/helpers/addressUtils';\nimport validateHexString from '@/core/helpers/validateHexString';\n\nconst isContractArgValid = (value, solidityType) => {\n  try {\n    if (!value && typeof value !== 'boolean') value = '';\n    if (solidityType.includes('[]')) {\n      const parsedValue = Array.isArray(value) ? value : stringToArray(value);\n      const type = solidityType.replace('[]', '');\n      for (const parsedItem of parsedValue) {\n        if (!isContractArgValid(parsedItem, type)) return false;\n      }\n      return true;\n    }\n    if (solidityType.includes(uint) || solidityType.includes(int)) {\n      return (\n        value !== '' && !isNaN(value) && isInt(value) && !hasWhiteSpace(value)\n      );\n    } else if (solidityType === address) return isAddress(value);\n    else if (solidityType === string) return true;\n    else if (solidityType.includes(bytes))\n      return value.substr(0, 2) === '0x' && validateHexString(value);\n    else if (solidityType === bool)\n      return typeof value === typeof true || typeof value === typeof false;\n    return false;\n  } catch (e) {\n    return false;\n  }\n};\nconst getType = inputType => {\n  if (!inputType) inputType = '';\n  if (inputType.includes('[]')) {\n    return { type: 'string', solidityType: `${inputType}` };\n  }\n  if (inputType.includes(uint) || inputType.includes(int))\n    return { type: 'number', solidityType: uint };\n  else if (inputType.includes(address))\n    return { type: 'text', solidityType: address };\n  else if (inputType.includes(string))\n    return { type: 'text', solidityType: string };\n  else if (inputType.includes(bytes))\n    return { type: 'text', solidityType: bytes };\n  else if (inputType.includes(bool))\n    return { type: 'radio', solidityType: bool };\n  return { type: 'text', solidityType: string };\n};\nconst parseABI = json => {\n  if (json === '') return false;\n  try {\n    const value = JSON.parse(json);\n    if (Array.isArray(value)) {\n      if (value.length > 0) {\n        return value;\n      }\n    }\n    return false;\n  } catch (e) {\n    if (Array.isArray(json)) {\n      if (json.length > 0) {\n        return json;\n      }\n    }\n    return false;\n  }\n};\n\nconst parseJSON = json => {\n  try {\n    return JSON.parse(json);\n  } catch (e) {\n    if (Array.isArray(json)) {\n      return json;\n    }\n    return false;\n  }\n};\n\nconst hasWhiteSpace = string => {\n  return /\\s/g.test(string);\n};\n\nexport { isContractArgValid, parseJSON, parseABI, getType, hasWhiteSpace };\n"],"sourceRoot":""}